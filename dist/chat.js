/*!
 * 
 * * (C) Copyright IBM Corp. 2017. All Rights Reserved.
 * *
 * * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * * in compliance with the License. You may obtain a copy of the License at
 * *
 * * http://www.apache.org/licenses/LICENSE-2.0
 * *
 * * Unless required by applicable law or agreed to in writing, software distributed under the License
 * * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * * or implied. See the License for the specific language governing permissions and limitations under
 * * the License.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("IBMChat",[],e):"object"==typeof exports?exports.IBMChat=e():t.IBMChat=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
function(t,e,n){var r=n(/*! ./bootstrap */63),i={init:r.init,restart:r.restart,destroy:r.destroy,clear:r.clear,send:function(t){return r.send(t),i},receive:function(t){return r.receive(t),i},sendMock:function(t){return r.sendMock(t),i},sendSilently:function(t){return r.sendSilently(t),i},registerLayout:function(t,e){return r.registerLayout(t,e),i},enableCustomInputHandler:function(t){return r.enableCustomInputHandler(t),i},disableCustomInputHandler:function(){return r.disableCustomInputHandler(),i},focusInput:function(){return r.focusInput(),i},disableInput:function(){return r.disableInput(),i},enableInput:function(){return r.enableInput(),i},subscribe:r.subscribe,subscribeOnce:r.subscribeOnce,publish:function(t,e){return r.publish(t,e),i},profile:{get:r.profile.get,set:r.profile.set,has:r.profile.has,clear:r.profile.clear,"delete":r.profile["delete"],forEach:r.profile.forEach},currentSubscriptions:r.currentSubscriptions,state:{get:r.state.get,set:function(t){return r.state.set(t),i}},context:{get:r.context.get,set:function(t){return r.context.set(t),i}},debug:function(){return r.debug(),i},version:"1.5.2"};t.exports=i},/*!*****************************!*\
  !*** ./src/events/index.js ***!
  \*****************************/
function(t,e,n){function r(t){switch(t){case!0:d("send",{message:"success",silent:!0});break;case!1:d("send",{message:"failure",silent:!0});break;default:d("send",{message:"cancel",silent:!0})}}function i(){p=[]}function o(t,e,n){void 0===typeof n&&(n=e)}function a(){return p.slice(0)}function s(t){for(var e=a(),n=0;n<e.length;n++){var r=e[n];if(r&&r.event===t)return!0;if(n===e.length-1)return!1}}function c(t,e,n,r){void 0===typeof n&&(n=e);var i=p.push({event:t,handler:e.bind(n),subscribeOnce:!!r})-1;if(!r)return{remove:function(){delete p[i]}}}function l(t,e,n){return c(t,e,n,!1)}function u(t,e,n){c(t,e,n,!0)}function d(t,e,n){for(var r=h.get(),i=!1,o=0;o<p.length;o++)p[o]&&p[o].event&&p[o].event===t&&(r.DEBUG&&(i=!0,"resize"!==t&&console.log("Subscription to "+t+" was called: ",e)),p[o].handler.call(void 0,e,n),p[o]&&p[o].subscribeOnce===!0&&delete p[o]);r.DEBUG&&t.indexOf("layout")==-1&&!i&&console.warn("Nothing is subscribed to "+t)}var h=n(/*! ../state */2),p=[];t.exports={destroy:i,unsubscribe:o,currentSubscriptions:a,hasSubscription:s,subscribe:l,subscribeOnce:u,publish:d,completeEvent:r}},/*!****************************!*\
  !*** ./src/state/index.js ***!
  \****************************/
function(t,e,n){function r(){return s}function i(){s={},o({})}function o(t){s=c({},s,t),s.DEBUG&&(a.push(s),console.log("STATE HISTORY: ",a),console.log("NEW STATE: ",s))}var a=[],s={},c=n(/*! lodash/assign */6);t.exports={get:r,set:o,destroy:i,getState:r,setState:o,destroyState:i}},/*!****************************!*\
  !*** ./src/utils/index.js ***!
  \****************************/
function(t,e,n){function r(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}}function i(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function o(t,e){return e&&Array.isArray(Object.keys(e))&&Object.keys(e).length>0&&Object.keys(e).forEach(function(n){t=t.split("${"+n+"}").join(e[n])}),t}function a(){var t=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(t+=performance.now()),"IBMChat-"+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})}function s(t,e){var n=" "+e+" ";return(" "+t.className+" ").replace(/[\n\t]/g," ").indexOf(n)>-1}function c(t,e){for(var n=0;n<t.length;n++){var r=e.cloneNode(!0);t[n].appendChild(r)}}function l(t){return!!t&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function u(){var t=m.get();f&&clearTimeout(f),l(t.root)?(t.isVisible||m.set({isVisible:!0}),v.publish("resize"),f=setTimeout(u,1e3)):(t.isVisible&&m.set({isVisible:!1}),f=setTimeout(u,300))}function d(){f&&clearTimeout(f)}function h(t){return!("string"!=typeof t||!document.getElementById(t))||!(!t.nodeType||1!==t.nodeType)}function p(t){var e={},n="https://api.ibm.com/virtualagent/run/api/v1/";return e.baseURL=t.baseURL||n,t.withCredentials&&(e.withCredentials=t.withCredentials),t.XIBMClientID&&(e.XIBMClientID=t.XIBMClientID),t.XIBMClientSecret&&(e.XIBMClientSecret=t.XIBMClientSecret),t.userID&&(e.userID=t.userID),t.userLatLon&&(e.userLatLon=t.userLatLon),e}var f,m=n(/*! ../state */2),v=n(/*! ../events */1),g=n(/*! ./writeMessage */90),b=n(/*! ./resize */89);t.exports={appendToEach:c,debounce:r,serialize:i,hasClass:s,getUUID:a,compile:o,writeMessage:g,addResizeListener:b.addResizeListener,removeResizeListener:b.removeResizeListener,isVisible:l,checkVisibility:u,checkRoot:h,getSDKConfig:p,endVisibilityCheck:d}},/*!***************************!*\
  !*** ./src/utils/i18n.js ***!
  \***************************/
function(t,e,n){function r(t,e){var n=c.get().langBundle;return n&&n[t]?n[t]:e?e:s[t]?s[t]:null}function i(t,e){var n,r=e?s:c.get().langBundle;if(r&&r[t]){if(n=r[t],"string"==typeof n){var o=c.get().locale;n=new a(n,o,l),r[t]=n}}else n=i(t,!0);return n}function o(t,e){var n=i(t);return n.format(e)}var a=n(/*! intl-messageformat */19),s=n(/*! json!yaml!../lang/en.yaml */25).en,c=n(/*! ../state */2),l={date:{weekday_short:{weekday:"short"}}};t.exports=r,t.exports.format=o},/*!*******************************************************!*\
  !*** ./~/@watson-virtual-agent/client-sdk/lib/web.js ***!
  \*******************************************************/
function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(22)},function(t,e){"use strict";function n(t){return"[object Array]"===_.call(t)}function r(t){return"[object ArrayBuffer]"===_.call(t)}function i(t){return"undefined"!=typeof FormData&&t instanceof FormData}function o(t){var e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"==typeof t}function s(t){return"number"==typeof t}function c(t){return"undefined"==typeof t}function l(t){return null!==t&&"object"==typeof t}function u(t){return"[object Date]"===_.call(t)}function d(t){return"[object File]"===_.call(t)}function h(t){return"[object Blob]"===_.call(t)}function p(t){return"[object Function]"===_.call(t)}function f(t){return l(t)&&p(t.pipe)}function m(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function v(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function b(t,e){if(null!==t&&"undefined"!=typeof t)if("object"==typeof t||n(t)||(t=[t]),n(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(null,t[o],o,t)}function y(){function t(t,n){"object"==typeof e[n]&&"object"==typeof t?e[n]=y(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;n<r;n++)b(arguments[n],t);return e}var _=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:r,isFormData:i,isArrayBufferView:o,isString:a,isNumber:s,isObject:l,isUndefined:c,isDate:u,isFile:d,isBlob:h,isFunction:p,isStream:f,isURLSearchParams:m,isStandardBrowserEnv:g,forEach:b,merge:y,trim:v}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(t){if(d===clearTimeout)return clearTimeout(t);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function a(){m&&p&&(m=!1,p.length?f=p.concat(f):v=-1,f.length&&s())}function s(){if(!m){var t=i(a);m=!0;for(var e=f.length;e;){for(p=f,f=[];++v<e;)p&&p[v].run();v=-1,e=f.length}p=null,m=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var u,d,h=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(t){d=r}}();var p,f=[],m=!1,v=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new c(t,e)),1!==f.length||m||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){(function(e){"use strict";var r=n(1),i=n(12),o=n(18),a=n(4),s=n(16),c="undefined"!=typeof window&&window.btoa||n(11),l=n(19);t.exports=function(t,u,d){var h=d.data,p=d.headers;r.isFormData(h)&&delete p["Content-Type"];var f=new XMLHttpRequest,m="onreadystatechange",v=!1;if("test"===e.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in f||s(d.url)||(f=new window.XDomainRequest,m="onload",v=!0,f.onprogress=function(){},f.ontimeout=function(){}),d.auth){var g=d.auth.username||"",b=d.auth.password||"";p.Authorization="Basic "+c(g+":"+b)}if(f.open(d.method.toUpperCase(),i(d.url,d.params,d.paramsSerializer),!0),f.timeout=d.timeout,f[m]=function(){if(f&&(4===f.readyState||v)&&0!==f.status){var e="getAllResponseHeaders"in f?o(f.getAllResponseHeaders()):null,n=d.responseType&&"text"!==d.responseType?f.response:f.responseText,r={data:a(n,e,d.transformResponse),status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:e,config:d,request:f};l(t,u,r),f=null}},f.onerror=function(){u(new Error("Network Error")),f=null},f.ontimeout=function(){var t=new Error("timeout of "+d.timeout+"ms exceeded");t.timeout=d.timeout,t.code="ECONNABORTED",u(t),f=null},r.isStandardBrowserEnv()){var y=n(14),_=d.withCredentials||s(d.url)?y.read(d.xsrfCookieName):void 0;_&&(p[d.xsrfHeaderName]=_)}if("setRequestHeader"in f&&r.forEach(p,function(t,e){"undefined"==typeof h&&"content-type"===e.toLowerCase()?delete p[e]:f.setRequestHeader(e,t)}),d.withCredentials&&(f.withCredentials=!0),d.responseType)try{f.responseType=d.responseType}catch(x){if("json"!==f.responseType)throw x}d.progress&&("post"===d.method||"put"===d.method?f.upload.addEventListener("progress",d.progress):"get"===d.method&&f.addEventListener("progress",d.progress)),void 0===h&&(h=null),f.send(h)}}).call(e,n(2))},function(t,e,n){"use strict";var r=n(1);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";function r(t){this.defaults=o.merge({},t),this.interceptors={request:new s,response:new s}}var i=n(9),o=n(1),a=n(8),s=n(7),c=n(15),l=n(13),u=n(10),d=n(4);r.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),t=o.merge(i,this.defaults,{method:"get"},t),t.baseURL&&!c(t.url)&&(t.url=l(t.baseURL,t.url)),t.withCredentials=t.withCredentials||this.defaults.withCredentials,t.data=d(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n};var h=new r(i),p=t.exports=u(r.prototype.request,h);p.request=u(r.prototype.request,h),p.Axios=r,p.defaults=h.defaults,p.interceptors=h.interceptors,p.create=function(t){return new r(t)},p.all=function(t){return Promise.all(t)},p.spread=n(20),o.forEach(["delete","get","head"],function(t){r.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))},p[t]=u(r.prototype[t],h)}),o.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))},p[t]=u(r.prototype[t],h)})},function(t,e,n){"use strict";function r(){this.handlers=[]}var i=n(1);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){(function(e){"use strict";t.exports=function(t){return new Promise(function(r,i){try{var o;"function"==typeof t.adapter?o=t.adapter:"undefined"!=typeof XMLHttpRequest?o=n(3):"undefined"!=typeof e&&(o=n(3)),"function"==typeof o&&o(r,i,t)}catch(a){i(a)}})}}).call(e,n(2))},function(t,e,n){"use strict";function r(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var i=n(1),o=n(17),a=/^\)\]\}',?\n/,s={"Content-Type":"application/x-www-form-urlencoded"};t.exports={transformRequest:[function(t,e){return o(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(r(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(r(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t){t=t.replace(a,"");try{t=JSON.parse(t)}catch(e){}}return t}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:i.merge(s),post:i.merge(s),put:i.merge(s)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}}},function(t,e){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e){"use strict";function n(){this.message="String contains an invalid character"}function r(t){for(var e,r,o=String(t),a="",s=0,c=i;o.charAt(0|s)||(c="=",s%1);a+=c.charAt(63&e>>8-s%1*8)){if(r=o.charCodeAt(s+=.75),r>255)throw new n;e=e<<8|r}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=r},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(1);t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var a=[];i.forEach(e,function(t,e){null!==t&&"undefined"!=typeof t&&(i.isArray(t)&&(e+="[]"),i.isArray(t)||(t=[t]),i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),o=a.join("&")}return o&&(t+=(t.indexOf("?")===-1?"?":"&")+o),t}},function(t,e){"use strict";t.exports=function(t,e){return t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")}},function(t,e,n){"use strict";var r=n(1);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";var r=n(1);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(n){var i=r.isString(n)?t(n):n;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},function(t,e,n){"use strict";var r=n(1);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(1);t.exports=function(t){var e,n,i,o={};return t?(r.forEach(t.split("\n"),function(t){i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e&&(o[e]=o[e]?o[e]+", "+n:n)}),o):o}},function(t,e){"use strict";t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(n):t(n)}},function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){var r;(function(t,i,o){/*!
		 * @overview es6-promise - a tiny implementation of Promises/A+.
		 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
		 * @license   Licensed under MIT license
		 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
		 * @version   3.2.1
		 */
(function(){"use strict";function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return"function"==typeof t}function c(t){K=t}function l(t){tt=t}function u(){return function(){t.nextTick(m)}}function d(){return function(){W(m)}}function h(){var t=0,e=new rt(m),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function p(){var t=new MessageChannel;return t.port1.onmessage=m,function(){t.port2.postMessage(0)}}function f(){return function(){setTimeout(m,1)}}function m(){for(var t=0;t<J;t+=2){var e=at[t],n=at[t+1];e(n),at[t]=void 0,at[t+1]=void 0}J=0}function v(){try{var t=n(27);return W=t.runOnLoop||t.runOnContext,d()}catch(e){return f()}}function g(t,e){var n=this,r=new this.constructor(y);void 0===r[lt]&&O(r);var i=n._state;if(i){var o=arguments[i-1];tt(function(){$(i,r,o,n._result)})}else A(n,r,t,e);return r}function b(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(y);return E(n,t),n}function y(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function x(){return new TypeError("A promises callback cannot return that same promise.")}function C(t){try{return t.then}catch(e){return pt.error=e,pt}}function w(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}function I(t,e,n){tt(function(t){var r=!1,i=w(n,e,function(n){r||(r=!0,e!==n?E(t,n):S(t,n))},function(e){r||(r=!0,k(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,k(t,i))},t)}function B(t,e){e._state===dt?S(t,e._result):e._state===ht?k(t,e._result):A(e,void 0,function(e){E(t,e)},function(e){k(t,e)})}function M(t,e,n){e.constructor===t.constructor&&n===st&&constructor.resolve===ct?B(t,e):n===pt?k(t,pt.error):void 0===n?S(t,e):s(n)?I(t,e,n):S(t,e)}function E(t,e){t===e?k(t,_()):a(e)?M(t,e,C(e)):S(t,e)}function L(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===ut&&(t._result=e,t._state=dt,0!==t._subscribers.length&&tt(T,t))}function k(t,e){t._state===ut&&(t._state=ht,t._result=e,tt(L,t))}function A(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+dt]=n,i[o+ht]=r,0===o&&t._state&&tt(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,a=0;a<e.length;a+=3)r=e[a],i=e[a+n],r?$(n,r,i,o):i(o);t._subscribers.length=0}}function D(){this.error=null}function H(t,e){try{return t(e)}catch(n){return ft.error=n,ft}}function $(t,e,n,r){var i,o,a,c,l=s(n);if(l){if(i=H(n,r),i===ft?(c=!0,o=i.error,i=null):a=!0,e===i)return void k(e,x())}else i=r,a=!0;e._state!==ut||(l&&a?E(e,i):c?k(e,o):t===dt?S(e,i):t===ht&&k(e,i))}function z(t,e){try{e(function(e){E(t,e)},function(e){k(t,e)})}catch(n){k(t,n)}}function q(){return mt++}function O(t){t[lt]=mt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function F(t){return new _t(this,t).promise}function j(t){var e=this;return new e(Q(t)?function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}:function(t,e){e(new TypeError("You must pass an array to race."))})}function R(t){var e=this,n=new e(y);return k(n,t),n}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(t){this[lt]=q(),this._result=this._state=void 0,this._subscribers=[],y!==t&&("function"!=typeof t&&N(),this instanceof U?z(this,t):P())}function V(t,e){this._instanceConstructor=t,this.promise=new t(y),this.promise[lt]||O(this.promise),Q(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):k(this.promise,X())}function X(){return new Error("Array Methods must be provided an Array")}function Y(){var t;if("undefined"!=typeof i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=yt)}var G;G=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var W,K,Z,Q=G,J=0,tt=function(t,e){at[J]=t,at[J+1]=e,J+=2,2===J&&(K?K(m):Z())},et="undefined"!=typeof window?window:void 0,nt=et||{},rt=nt.MutationObserver||nt.WebKitMutationObserver,it="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),ot="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,at=new Array(1e3);Z=it?u():rt?h():ot?p():void 0===et?v():f();var st=g,ct=b,lt=Math.random().toString(36).substring(16),ut=void 0,dt=1,ht=2,pt=new D,ft=new D,mt=0,vt=F,gt=j,bt=R,yt=U;U.all=vt,U.race=gt,U.resolve=ct,U.reject=bt,U._setScheduler=c,U._setAsap=l,U._asap=tt,U.prototype={constructor:U,then:st,"catch":function(t){return this.then(null,t)}};var _t=V;V.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ut&&n<t;n++)this._eachEntry(e[n],n)},V.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===ct){var i=C(t);if(i===st&&t._state!==ut)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===yt){var o=new n(y);M(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},V.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===ut&&(this._remaining--,t===ht?k(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},V.prototype._willSettleAt=function(t,e){var n=this;A(t,void 0,function(t){n._settledAt(dt,e,t)},function(t){n._settledAt(ht,e,t)})};var xt=Y,Ct={Promise:yt,polyfill:xt};n(25).amd?(r=function(){return Ct}.call(e,n,e,o),!(void 0!==r&&(o.exports=r))):"undefined"!=typeof o&&o.exports?o.exports=Ct:"undefined"!=typeof this&&(this.ES6Promise=Ct),xt()}).call(this)}).call(e,n(2),function(){return this}(),n(26)(t))},function(t,e,n){"undefined"==typeof Promise&&n(21).polyfill();var r=n(24),i=n(5),o=n(23),a={baseURL:"https://dev.api.ibm.com/virtualagent/development/api/v1/",timeout:3e4,userID:null,withCredentials:!1,XIBMClientID:!1,XIBMClientSecret:!1},s=i.create(a),c=/\|&(.*?)\|/g,l=function(t){var e="string"==typeof t?t:JSON.stringify(t),n=e.match(c)||[];return e=n.reduce(function(t,e){const n=e.slice(2,-1),r=o.get(n)||n;return t.replace(e,r)},e),"string"==typeof t?e:JSON.parse(e)},u=t.exports={configure:function(t){return r(a,t),s=i.create({baseURL:a.baseURL,timeout:a.timeout,withCredentials:a.withCredentials,headers:a.XIBMClientID&&a.XIBMClientSecret?{"X-IBM-Client-Id":a.XIBMClientID,"X-IBM-Client-Secret":a.XIBMClientSecret}:{}}),u},start:function(t){var e=d(),n={userID:a.userID,userLatLon:a.userLatLon},r="/bots/"+t+"/dialogs",i={headers:{"X-Request-ID":e}};return s.post(r,n,i).then(function(t){return{chatID:t.data.dialog_id,message:l(t.data.message)}})["catch"](function(t){console.error("Request failed:",e),h(t)})},send:function(t,e,n,r){var i=d(),o={message:n,userID:a.userID,userLatLon:a.userLatLon,context:r},c="/bots/"+t+"/dialogs/"+e+"/messages",u={headers:{"X-Request-ID":i}};return s.post(c,o,u).then(function(t){return{message:l(t.data.message)}})["catch"](function(t){console.error("Request failed:",i),h(t)})},parse:l,profile:{get:o.get,set:o.set,has:o.has,clear:o.clear,"delete":o["delete"],forEach:o.forEach}},d=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},h=function(t){if(!t.status)throw t;var e=t.status,n=t.statusText,r=new Error(n);throw r.status=e,r}},function(t,e){var n={},r={set:function(t,e){return n[t]=e,r},get:function(t){return n[t]||""},has:function(t){return void 0!==n[t]},clear:function(){return n={},r},"delete":function(t){return delete n[t],r},forEach:function(t,e){return Object.keys(n).forEach(function(r){e?t(r,n[r]).bind(e):t(r,n[r])}),r}};t.exports=r},function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t){return function(e){return null==e?void 0:e[t]}}function i(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function o(t,e){return function(n){return t(e(n))}}function a(t,e,n){var r=t[e];T.call(t,e)&&m(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function s(t,e){return null!=t&&(T.call(t,e)||"object"==typeof t&&e in t&&null===R(t))}function c(t,e){return e=q(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=q(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=a,n(t,this,s)}}function l(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var s=e[i],c=r?r(n[s],t[s],s,n,t):void 0;a(n,s,void 0===c?t[s]:c)}return n}function u(t){return c(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&p(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function d(t){var e=t?t.length:void 0;return _(e)&&(N(t)||w(t)||v(t))?i(e,String):null}function h(t,e){return e=null==e?B:e,!!e&&("number"==typeof t||k.test(t))&&t>-1&&t%1==0&&t<e}function p(t,e,n){if(!x(n))return!1;var r=typeof e;return!!("number"==r?g(n)&&h(e,n.length):"string"==r&&e in n)&&m(n[e],t)}function f(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||A;return t===n}function m(t,e){return t===e||t!==t&&e!==e}function v(t){return b(t)&&T.call(t,"callee")&&(!H.call(t,"callee")||D.call(t)==M)}function g(t){return null!=t&&_(j(t))&&!y(t)}function b(t){return C(t)&&g(t)}function y(t){var e=x(t)?D.call(t):"";return e==E||e==L}function _(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=B}function x(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function C(t){return!!t&&"object"==typeof t}function w(t){return"string"==typeof t||!N(t)&&C(t)&&D.call(t)==S}function I(t){var e=f(t);if(!e&&!g(t))return F(t);var n=d(t),r=!!n,i=n||[],o=i.length;for(var a in t)!s(t,a)||r&&("length"==a||h(a,o))||e&&"constructor"==a||i.push(a);return i}var B=9007199254740991,M="[object Arguments]",E="[object Function]",L="[object GeneratorFunction]",S="[object String]",k=/^(?:0|[1-9]\d*)$/,A=Object.prototype,T=A.hasOwnProperty,D=A.toString,H=A.propertyIsEnumerable,$=Object.getPrototypeOf,z=Object.keys,q=Math.max,O=!H.call({valueOf:1},"valueOf"),F=o(z,Object),j=r("length"),R=o($,Object),N=Array.isArray,P=u(function(t,e){if(O||f(e)||g(e))return void l(e,I(e),t);for(var n in e)T.call(e,n)&&a(t,n,e[n])});t.exports=P},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){}])})},/*!****************************!*\
  !*** ./~/lodash/assign.js ***!
  \****************************/
function(t,e,n){var r=n(/*! ./_assignValue */12),i=n(/*! ./_copyObject */31),o=n(/*! ./_createAssigner */32),a=n(/*! ./isArrayLike */8),s=n(/*! ./_isPrototype */14),c=n(/*! ./keys */42),l=Object.prototype,u=l.hasOwnProperty,d=l.propertyIsEnumerable,h=!d.call({valueOf:1},"valueOf"),p=o(function(t,e){if(h||s(e)||a(e))return void i(e,c(e),t);for(var n in e)u.call(e,n)&&r(t,n,e[n])});t.exports=p},/*!********************************!*\
  !*** ./src/templates/index.js ***!
  \********************************/
function(t,e,n){t.exports={input:n(/*! ./input.html */58),receive:n(/*! ./receive.html */60),send:n(/*! ./send.html */61),start:n(/*! ./start.html */62),loading:n(/*! ./loading.html */59)}},/*!*********************************!*\
  !*** ./~/lodash/isArrayLike.js ***!
  \*********************************/
function(t,e,n){function r(t){return null!=t&&o(t.length)&&!i(t)}var i=n(/*! ./isFunction */39),o=n(/*! ./isLength */40);t.exports=r},/*!******************************!*\
  !*** ./src/profile/index.js ***!
  \******************************/
function(t,e,n){var r=n(/*! @watson-virtual-agent/client-sdk/lib/web */5),i=r.profile;t.exports=i},/*!***********************!*\
  !*** ./src/styles.js ***!
  \***********************/
function(t,e,n){function r(t,e){var n=document.createElement("style");n.type="text/css",n.classList.add("styles-"+e.chatStyleID),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(n)}function i(t){var e="."+t.chatStyleID,n=s(a(t.styles.background)),r="rgba("+n[0]+","+n[1]+","+n[2]+",0.8)",i="rgba("+n[0]+","+n[1]+","+n[2]+",0)",c="";return c+=e+"{ overflow:hidden;}",c+=e+" .IBMChat-outer-container {font-size: "+t.styles.fontSize+"; line-height: "+t.styles.fontSize+"; font-family: "+t.styles.fontFamily+";}",c+=e+" .IBMChat-outer-container textarea {font-size: "+t.styles.fontSize+"; font-family: "+t.styles.fontFamily+";}",c+=e+" .IBMChat-default-colors {background-color: "+t.styles.background+"; color: "+t.styles.text+";}",c+=e+" .IBMChat-secondary-colors {background-color: "+t.styles.secondaryBackground+"; color: "+t.styles.secondaryText+";}",c+=e+" .IBMChat-secondary-colors-button {background-color: transparent; border: 1px solid "+t.styles.secondaryBackground+"; color: "+t.styles.secondaryBackground+";}",c+=e+" .IBMChat-accent-colors {background-color: "+t.styles.accentBackground+"; border: 1px solid "+t.styles.accentBackground+"; color: "+t.styles.accentText+";}",c+=e+" .IBMChat-accent-colors-button {background-color: transparent; border: 1px solid "+t.styles.accentBackground+"; color: "+t.styles.accentBackground+";}",c+=e+" .IBMChat-accent-colors-button:hover {background-color: "+t.styles.accentBackground+"; border: 1px solid "+t.styles.accentBackground+"; color: "+t.styles.accentText+";}",c+=e+" .IBMChat-accent-colors-button[disabled]:hover {background-color: transparent; border: 1px solid "+t.styles.accentBackground+"; color: "+t.styles.accentBackground+";}",c+=e+" .IBMChat-error-colors {background-color: "+t.styles.errorBackground+"; color: "+t.styles.errorText+";}",c+=e+" .IBMChat-input-colors {background-color: "+t.styles.inputBackground+"; color: "+t.styles.inputText+"; border-bottom: 1px solid "+t.styles.inputText+";}",c+=e+" .IBMChat-watson-message-line {border-left: 3px solid "+t.styles.accentBackground+";}",c+=e+" a {border: 0; color: "+t.styles.link+"; font-weight: normal; text-decoration: none; font-size:1em;}",c+=e+" a:hover, ",c+=e+" a:visited, ",c+=e+" a:active {color: "+t.styles.link+"; font-weight: normal; text-decoration: underline; font-size:1em;}",c+=e+" .IBMChat-chat-textbox {border-bottom: solid 1px "+t.styles.text+";}",c+=e+" .IBMChat-chat-textbox:focus {border-bottom: solid 2px "+t.styles.accentBackground+";}",c+=e+" ::-webkit-input-placeholder {color: "+o(t.styles.inputText,t.styles.inputBackground)+";}",c+=e+" ::-moz-placeholder {color: "+o(t.styles.inputText,t.styles.inputBackground)+"; opacity: 1;}",c+=e+" :-ms-input-placeholder {color: "+o(t.styles.inputText,t.styles.inputBackground)+"; opacity: 1;}",c+=e+" .IBMChat-ball {fill: "+a(t.styles.accentBackground)+";}",c+=e+" .IBMChat-fade {left: 0; height: 10%; max-height: 32px; position: absolute; top: 0; width: 100%; z-index: 2; background: linear-gradient(to bottom, "+r+" 0%, "+i+" 100%);}",c+=e+" .IBMChat-loading-message {color: "+o(t.styles.inputText,t.styles.inputBackground)+";}"}function o(t,e){var n=s(a(t)),r=s(a(e)),i=.6,o=2*i-1,c=(o+1)/2,l=1-c,u=[parseInt(n[0]*c+r[0]*l),parseInt(n[1]*c+r[1]*l),parseInt(n[2]*c+r[2]*l)],d="rgb("+u[0]+","+u[1]+","+u[2]+")";return a(d)}function a(t){function e(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}return t.indexOf("#")>-1?t:"#"+e(t)}function s(t){var e=[];return t=t.replace("#",""),e.push(parseInt(t.substring(0,2),16)),e.push(parseInt(t.substring(2,4),16)),e.push(parseInt(t.substring(4,6),16)),e}function c(t,e){var n=s(t),r=n[0],i=n[1],o=n[2];return"rgba("+r+","+i+","+o+","+e/100+")"}function l(t){var e=h.get()[t],n=i(e);r(n)}function u(){var t=h.get(),e=i(t);r(p,t),r(e,t)}function d(t,e,n){var r=document.querySelectorAll(".styles-"+e);if(r&&r.length>0)for(var i=0;r.length>i;i++)r[i].parentNode.removeChild(r[i]);t&&t.classList.remove("IBMChat-isLarge","IBMChat-relative",e,"chatID-"+n)}var h=n(/*! ./state */2),p=n(/*! ./styles.css */57),f={background:"rgba(61, 61, 61, 1)",accentBackground:"#BA8FF7",accentText:"#ffffff",text:"#ffffff",link:"#AF6EE8",secondaryBackground:"rgba(90, 90, 90, 1)",secondaryText:"rgba(247, 247, 247, 1)",inputBackground:"rgba(90, 90, 90, 1)",inputText:"rgba(247, 247, 247, 1)",errorBackground:"#e86e6e",errorText:"#ffffff",fontSize:"15px",fontFamily:'"Helvetica Neue",HelveticaNeue,Helvetica,sans-serif'};t.exports={defaultStyles:f,attachStyles:u,removeStyles:d,attachPlaybackStyles:l,convertHexToRGBA:c,normalizeToHex:a}},/*!*******************************************!*\
  !*** ./~/intl-messageformat/lib/utils.js ***!
  \*******************************************/
function(t,e){"use strict";function n(t){var e,n,i,o,a=Array.prototype.slice.call(arguments,1);for(e=0,n=a.length;e<n;e+=1)if(i=a[e])for(o in i)r.call(i,o)&&(t[o]=i[o]);return t}e.extend=n;var r=Object.prototype.hasOwnProperty;e.hop=r},/*!**********************************!*\
  !*** ./~/lodash/_assignValue.js ***!
  \**********************************/
function(t,e,n){function r(t,e,n){var r=t[e];a.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||(t[e]=n)}var i=n(/*! ./eq */15),o=Object.prototype,a=o.hasOwnProperty;t.exports=r},/*!******************************!*\
  !*** ./~/lodash/_isIndex.js ***!
  \******************************/
function(t,e){function n(t,e){return e=null==e?r:e,!!e&&("number"==typeof t||i.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=n},/*!**********************************!*\
  !*** ./~/lodash/_isPrototype.js ***!
  \**********************************/
function(t,e){function n(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||r;return t===n}var r=Object.prototype;t.exports=n},/*!************************!*\
  !*** ./~/lodash/eq.js ***!
  \************************/
function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},/*!******************************!*\
  !*** ./~/lodash/isObject.js ***!
  \******************************/
function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},/*!**********************************************!*\
  !*** ./~/intl-messageformat-parser/index.js ***!
  \**********************************************/
function(t,e,n){"use strict";e=t.exports=n(/*! ./lib/parser */18)["default"],e["default"]=e},/*!***************************************************!*\
  !*** ./~/intl-messageformat-parser/lib/parser.js ***!
  \***************************************************/
function(t,e){"use strict";e["default"]=function(){function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,e,n,r,i,o){this.message=t,this.expected=e,this.found=n,this.offset=r,this.line=i,this.column=o,this.name="SyntaxError"}function n(t){function n(e){function n(e,n,r){var i,o;for(i=n;i<r;i++)o=t.charAt(i),"\n"===o?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return Wt!==e&&(Wt>e&&(Wt=0,Kt={line:1,column:1,seenCR:!1}),n(Kt,Wt,e),Wt=e),Kt}function r(t){Yt<Zt||(Yt>Zt&&(Zt=Yt,Qt=[]),Qt.push(t))}function i(r,i,o){function a(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function s(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var r,i,o,a=new Array(t.length);for(o=0;o<t.length;o++)a[o]=t[o].description;return r=t.length>1?a.slice(0,-1).join(", ")+" or "+a[t.length-1]:a[0],i=e?'"'+n(e)+'"':"end of input","Expected "+r+" but "+i+" found."}var c=n(o),l=o<t.length?t.charAt(o):null;return null!==i&&a(i),new e(null!==r?r:s(i,l),i,l,o,c.line,c.column)}function o(){var t;return t=a()}function a(){var t,e,n;for(t=Yt,e=[],n=s();n!==k;)e.push(n),n=s();return e!==k&&(Gt=t,e=D(e)),t=e}function s(){var t;return t=l(),t===k&&(t=d()),t}function c(){var e,n,r,i,o,a;if(e=Yt,n=[],r=Yt,i=C(),i!==k?(o=E(),o!==k?(a=C(),a!==k?(i=[i,o,a],r=i):(Yt=r,r=H)):(Yt=r,r=H)):(Yt=r,r=H),r!==k)for(;r!==k;)n.push(r),r=Yt,i=C(),i!==k?(o=E(),o!==k?(a=C(),a!==k?(i=[i,o,a],r=i):(Yt=r,r=H)):(Yt=r,r=H)):(Yt=r,r=H);else n=H;return n!==k&&(Gt=e,n=$(n)),e=n,e===k&&(e=Yt,n=x(),n!==k&&(n=t.substring(e,Yt)),e=n),e}function l(){var t,e;return t=Yt,e=c(),e!==k&&(Gt=t,e=z(e)),t=e}function u(){var e,n,i;if(e=B(),e===k){if(e=Yt,n=[],q.test(t.charAt(Yt))?(i=t.charAt(Yt),Yt++):(i=k,0===Jt&&r(O)),i!==k)for(;i!==k;)n.push(i),q.test(t.charAt(Yt))?(i=t.charAt(Yt),Yt++):(i=k,0===Jt&&r(O));else n=H;n!==k&&(n=t.substring(e,Yt)),e=n}return e}function d(){var e,n,i,o,a,s,c,l,d;return e=Yt,123===t.charCodeAt(Yt)?(n=F,Yt++):(n=k,0===Jt&&r(j)),n!==k?(i=C(),i!==k?(o=u(),o!==k?(a=C(),a!==k?(s=Yt,44===t.charCodeAt(Yt)?(c=N,Yt++):(c=k,0===Jt&&r(P)),c!==k?(l=C(),l!==k?(d=h(),d!==k?(c=[c,l,d],s=c):(Yt=s,s=H)):(Yt=s,s=H)):(Yt=s,s=H),s===k&&(s=R),s!==k?(c=C(),c!==k?(125===t.charCodeAt(Yt)?(l=U,Yt++):(l=k,0===Jt&&r(V)),l!==k?(Gt=e,n=X(o,s),e=n):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H),e}function h(){var t;return t=p(),t===k&&(t=f(),t===k&&(t=m(),t===k&&(t=v()))),t}function p(){var e,n,i,o,a,s,c;return e=Yt,t.substr(Yt,6)===Y?(n=Y,Yt+=6):(n=k,0===Jt&&r(G)),n===k&&(t.substr(Yt,4)===W?(n=W,Yt+=4):(n=k,0===Jt&&r(K)),n===k&&(t.substr(Yt,4)===Z?(n=Z,Yt+=4):(n=k,0===Jt&&r(Q)))),n!==k?(i=C(),i!==k?(o=Yt,44===t.charCodeAt(Yt)?(a=N,Yt++):(a=k,0===Jt&&r(P)),a!==k?(s=C(),s!==k?(c=E(),c!==k?(a=[a,s,c],o=a):(Yt=o,o=H)):(Yt=o,o=H)):(Yt=o,o=H),o===k&&(o=R),o!==k?(Gt=e,n=J(n,o),e=n):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H),e}function f(){var e,n,i,o,a,s;return e=Yt,t.substr(Yt,6)===tt?(n=tt,Yt+=6):(n=k,0===Jt&&r(et)),n!==k?(i=C(),i!==k?(44===t.charCodeAt(Yt)?(o=N,Yt++):(o=k,0===Jt&&r(P)),o!==k?(a=C(),a!==k?(s=_(),s!==k?(Gt=e,n=nt(s),e=n):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H),e}function m(){var e,n,i,o,a,s;return e=Yt,t.substr(Yt,13)===rt?(n=rt,Yt+=13):(n=k,0===Jt&&r(it)),n!==k?(i=C(),i!==k?(44===t.charCodeAt(Yt)?(o=N,Yt++):(o=k,0===Jt&&r(P)),o!==k?(a=C(),a!==k?(s=_(),s!==k?(Gt=e,n=ot(s),e=n):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H),e}function v(){var e,n,i,o,a,s,c;if(e=Yt,t.substr(Yt,6)===at?(n=at,Yt+=6):(n=k,0===Jt&&r(st)),n!==k)if(i=C(),i!==k)if(44===t.charCodeAt(Yt)?(o=N,Yt++):(o=k,0===Jt&&r(P)),o!==k)if(a=C(),a!==k){if(s=[],c=b(),c!==k)for(;c!==k;)s.push(c),c=b();else s=H;s!==k?(Gt=e,n=ct(s),e=n):(Yt=e,e=H)}else Yt=e,e=H;else Yt=e,e=H;else Yt=e,e=H;else Yt=e,e=H;return e}function g(){var e,n,i,o;return e=Yt,n=Yt,61===t.charCodeAt(Yt)?(i=lt,Yt++):(i=k,0===Jt&&r(ut)),i!==k?(o=B(),o!==k?(i=[i,o],n=i):(Yt=n,n=H)):(Yt=n,n=H),n!==k&&(n=t.substring(e,Yt)),e=n,e===k&&(e=E()),e}function b(){var e,n,i,o,s,c,l,u,d;return e=Yt,n=C(),n!==k?(i=g(),i!==k?(o=C(),o!==k?(123===t.charCodeAt(Yt)?(s=F,Yt++):(s=k,0===Jt&&r(j)),s!==k?(c=C(),c!==k?(l=a(),l!==k?(u=C(),u!==k?(125===t.charCodeAt(Yt)?(d=U,Yt++):(d=k,0===Jt&&r(V)),d!==k?(Gt=e,n=dt(i,l),e=n):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H),e}function y(){var e,n,i,o;return e=Yt,t.substr(Yt,7)===ht?(n=ht,Yt+=7):(n=k,0===Jt&&r(pt)),n!==k?(i=C(),i!==k?(o=B(),o!==k?(Gt=e,n=ft(o),e=n):(Yt=e,e=H)):(Yt=e,e=H)):(Yt=e,e=H),e}function _(){var t,e,n,r,i;if(t=Yt,e=y(),e===k&&(e=R),e!==k)if(n=C(),n!==k){if(r=[],i=b(),i!==k)for(;i!==k;)r.push(i),i=b();else r=H;r!==k?(Gt=t,e=mt(e,r),t=e):(Yt=t,t=H)}else Yt=t,t=H;else Yt=t,t=H;return t}function x(){var e,n;if(Jt++,e=[],gt.test(t.charAt(Yt))?(n=t.charAt(Yt),Yt++):(n=k,0===Jt&&r(bt)),n!==k)for(;n!==k;)e.push(n),gt.test(t.charAt(Yt))?(n=t.charAt(Yt),Yt++):(n=k,0===Jt&&r(bt));else e=H;return Jt--,e===k&&(n=k,0===Jt&&r(vt)),e}function C(){var e,n,i;for(Jt++,e=Yt,n=[],i=x();i!==k;)n.push(i),i=x();return n!==k&&(n=t.substring(e,Yt)),e=n,Jt--,e===k&&(n=k,0===Jt&&r(yt)),e}function w(){var e;return _t.test(t.charAt(Yt))?(e=t.charAt(Yt),Yt++):(e=k,0===Jt&&r(xt)),e}function I(){var e;return Ct.test(t.charAt(Yt))?(e=t.charAt(Yt),Yt++):(e=k,0===Jt&&r(wt)),e}function B(){var e,n,i,o,a,s;if(e=Yt,48===t.charCodeAt(Yt)?(n=It,Yt++):(n=k,0===Jt&&r(Bt)),n===k){if(n=Yt,i=Yt,Mt.test(t.charAt(Yt))?(o=t.charAt(Yt),Yt++):(o=k,0===Jt&&r(Et)),o!==k){for(a=[],s=w();s!==k;)a.push(s),s=w();a!==k?(o=[o,a],i=o):(Yt=i,i=H)}else Yt=i,i=H;i!==k&&(i=t.substring(n,Yt)),n=i}return n!==k&&(Gt=e,n=Lt(n)),e=n}function M(){var e,n,i,o,a,s,c,l;return St.test(t.charAt(Yt))?(e=t.charAt(Yt),Yt++):(e=k,0===Jt&&r(kt)),e===k&&(e=Yt,t.substr(Yt,2)===At?(n=At,Yt+=2):(n=k,0===Jt&&r(Tt)),n!==k&&(Gt=e,n=Dt()),e=n,e===k&&(e=Yt,t.substr(Yt,2)===Ht?(n=Ht,Yt+=2):(n=k,0===Jt&&r($t)),n!==k&&(Gt=e,n=zt()),e=n,e===k&&(e=Yt,t.substr(Yt,2)===qt?(n=qt,Yt+=2):(n=k,0===Jt&&r(Ot)),n!==k&&(Gt=e,n=Ft()),e=n,e===k&&(e=Yt,t.substr(Yt,2)===jt?(n=jt,Yt+=2):(n=k,0===Jt&&r(Rt)),n!==k&&(Gt=e,n=Nt()),e=n,e===k&&(e=Yt,t.substr(Yt,2)===Pt?(n=Pt,Yt+=2):(n=k,0===Jt&&r(Ut)),n!==k?(i=Yt,o=Yt,a=I(),a!==k?(s=I(),s!==k?(c=I(),c!==k?(l=I(),l!==k?(a=[a,s,c,l],o=a):(Yt=o,o=H)):(Yt=o,o=H)):(Yt=o,o=H)):(Yt=o,o=H),o!==k&&(o=t.substring(i,Yt)),i=o,i!==k?(Gt=e,n=Vt(i),e=n):(Yt=e,e=H)):(Yt=e,e=H)))))),e}function E(){var t,e,n;if(t=Yt,e=[],n=M(),n!==k)for(;n!==k;)e.push(n),n=M();else e=H;return e!==k&&(Gt=t,e=Xt(e)),t=e}var L,S=arguments.length>1?arguments[1]:{},k={},A={start:o},T=o,D=function(t){return{type:"messageFormatPattern",elements:t}},H=k,$=function(t){var e,n,r,i,o,a="";for(e=0,r=t.length;e<r;e+=1)for(i=t[e],n=0,o=i.length;n<o;n+=1)a+=i[n];return a},z=function(t){return{type:"messageTextElement",value:t}},q=/^[^ \t\n\r,.+={}#]/,O={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},F="{",j={type:"literal",value:"{",description:'"{"'},R=null,N=",",P={type:"literal",value:",",description:'","'},U="}",V={type:"literal",value:"}",description:'"}"'},X=function(t,e){return{type:"argumentElement",id:t,format:e&&e[2]}},Y="number",G={type:"literal",value:"number",description:'"number"'},W="date",K={type:"literal",value:"date",description:'"date"'},Z="time",Q={type:"literal",value:"time",description:'"time"'},J=function(t,e){return{type:t+"Format",style:e&&e[2]}},tt="plural",et={type:"literal",value:"plural",description:'"plural"'},nt=function(t){return{type:t.type,ordinal:!1,offset:t.offset||0,options:t.options}},rt="selectordinal",it={type:"literal",value:"selectordinal",description:'"selectordinal"'},ot=function(t){return{type:t.type,ordinal:!0,offset:t.offset||0,options:t.options}},at="select",st={type:"literal",value:"select",description:'"select"'},ct=function(t){return{type:"selectFormat",options:t}},lt="=",ut={type:"literal",value:"=",description:'"="'},dt=function(t,e){return{type:"optionalFormatPattern",selector:t,value:e}},ht="offset:",pt={type:"literal",value:"offset:",description:'"offset:"'},ft=function(t){return t},mt=function(t,e){return{type:"pluralFormat",offset:t,options:e}},vt={type:"other",description:"whitespace"},gt=/^[ \t\n\r]/,bt={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},yt={type:"other",description:"optionalWhitespace"},_t=/^[0-9]/,xt={type:"class",value:"[0-9]",description:"[0-9]"},Ct=/^[0-9a-f]/i,wt={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},It="0",Bt={type:"literal",value:"0",description:'"0"'},Mt=/^[1-9]/,Et={type:"class",value:"[1-9]",description:"[1-9]"},Lt=function(t){return parseInt(t,10)},St=/^[^{}\\\0-\x1F \t\n\r]/,kt={type:"class",value:"[^{}\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F \\t\\n\\r]"},At="\\\\",Tt={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},Dt=function(){return"\\"},Ht="\\#",$t={type:"literal",value:"\\#",description:'"\\\\#"'},zt=function(){return"\\#"},qt="\\{",Ot={type:"literal",value:"\\{",description:'"\\\\{"'},Ft=function(){return"{"},jt="\\}",Rt={type:"literal",value:"\\}",description:'"\\\\}"'},Nt=function(){return"}"},Pt="\\u",Ut={type:"literal",value:"\\u",description:'"\\\\u"'},Vt=function(t){return String.fromCharCode(parseInt(t,16))},Xt=function(t){return t.join("")},Yt=0,Gt=0,Wt=0,Kt={line:1,column:1,seenCR:!1},Zt=0,Qt=[],Jt=0;if("startRule"in S){if(!(S.startRule in A))throw new Error("Can't start parsing from rule \""+S.startRule+'".');T=A[S.startRule]}if(L=T(),L!==k&&Yt===t.length)return L;throw L!==k&&Yt<t.length&&r({type:"end",description:"end of input"}),i(null,Qt,Zt)}return t(e,Error),{SyntaxError:e,parse:n}}()},/*!***************************************!*\
  !*** ./~/intl-messageformat/index.js ***!
  \***************************************/
function(t,e,n){"use strict";var r=n(/*! ./lib/main */24)["default"];n(/*! ./lib/locales */91),e=t.exports=r,e["default"]=e},/*!**********************************************!*\
  !*** ./~/intl-messageformat/lib/compiler.js ***!
  \**********************************************/
function(t,e){"use strict";function n(t,e,n){this.locales=t,this.formats=e,this.pluralFn=n}function r(t){this.id=t}function i(t,e,n,r,i){this.id=t,this.useOrdinal=e,this.offset=n,this.options=r,this.pluralFn=i}function o(t,e,n,r){this.id=t,this.offset=e,this.numberFormat=n,this.string=r}function a(t,e){this.id=t,this.options=e}e["default"]=n,n.prototype.compile=function(t){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(t)},n.prototype.compileMessage=function(t){if(!t||"messageFormatPattern"!==t.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var e,n,r,i=t.elements,o=[];for(e=0,n=i.length;e<n;e+=1)switch(r=i[e],r.type){case"messageTextElement":o.push(this.compileMessageText(r));break;case"argumentElement":o.push(this.compileArgument(r));break;default:throw new Error("Message element does not have a valid type")}return o},n.prototype.compileMessageText=function(t){return this.currentPlural&&/(^|[^\\])#/g.test(t.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new o(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,t.value)):t.value.replace(/\\#/g,"#")},n.prototype.compileArgument=function(t){var e=t.format;if(!e)return new r(t.id);var n,o=this.formats,s=this.locales,c=this.pluralFn;switch(e.type){case"numberFormat":return n=o.number[e.style],{id:t.id,format:new Intl.NumberFormat(s,n).format};case"dateFormat":return n=o.date[e.style],{id:t.id,format:new Intl.DateTimeFormat(s,n).format};case"timeFormat":return n=o.time[e.style],{id:t.id,format:new Intl.DateTimeFormat(s,n).format};case"pluralFormat":return n=this.compileOptions(t),new i(t.id,e.ordinal,e.offset,n,c);case"selectFormat":return n=this.compileOptions(t),new a(t.id,n);default:throw new Error("Message element does not have a valid format type")}},n.prototype.compileOptions=function(t){var e=t.format,n=e.options,r={};this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===e.type?t:null;var i,o,a;for(i=0,o=n.length;i<o;i+=1)a=n[i],r[a.selector]=this.compileMessage(a.value);return this.currentPlural=this.pluralStack.pop(),r},r.prototype.format=function(t){return t?"string"==typeof t?t:String(t):""},i.prototype.getOption=function(t){var e=this.options,n=e["="+t]||e[this.pluralFn(t-this.offset,this.useOrdinal)];return n||e.other},o.prototype.format=function(t){var e=this.numberFormat.format(t-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+e).replace(/\\#/g,"#")},a.prototype.getOption=function(t){var e=this.options;return e[t]||e.other}},/*!******************************************!*\
  !*** ./~/intl-messageformat/lib/core.js ***!
  \******************************************/
function(t,e,n){"use strict";function r(t,e,n){var i="string"==typeof t?r.__parse(t):t;if(!i||"messageFormatPattern"!==i.type)throw new TypeError("A message must be provided as a String or AST.");n=this._mergeFormats(r.formats,n),o.defineProperty(this,"_locale",{value:this._resolveLocale(e)});var a=this._findPluralRuleFunction(this._locale),s=this._compilePattern(i,e,n,a),c=this;this.format=function(t){return c._format(s,t)}}var i=n(/*! ./utils */11),o=n(/*! ./es5 */23),a=n(/*! ./compiler */20),s=n(/*! intl-messageformat-parser */17);e["default"]=r,o.defineProperty(r,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{"short":{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},"long":{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{"short":{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},"long":{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),o.defineProperty(r,"__localeData__",{value:o.objCreate(null)}),o.defineProperty(r,"__addLocaleData",{value:function(t){if(!t||!t.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");r.__localeData__[t.locale.toLowerCase()]=t}}),o.defineProperty(r,"__parse",{value:s["default"].parse}),o.defineProperty(r,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),r.prototype.resolvedOptions=function(){return{locale:this._locale}},r.prototype._compilePattern=function(t,e,n,r){var i=new a["default"](e,n,r);return i.compile(t)},r.prototype._findPluralRuleFunction=function(t){for(var e=r.__localeData__,n=e[t.toLowerCase()];n;){if(n.pluralRuleFunction)return n.pluralRuleFunction;n=n.parentLocale&&e[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+t)},r.prototype._format=function(t,e){var n,r,o,a,s,c="";for(n=0,r=t.length;n<r;n+=1)if(o=t[n],"string"!=typeof o){if(a=o.id,!e||!i.hop.call(e,a))throw new Error("A value must be provided for: "+a);s=e[a],c+=o.options?this._format(o.getOption(s),e):o.format(s)}else c+=o;return c},r.prototype._mergeFormats=function(t,e){var n,r,a={};for(n in t)i.hop.call(t,n)&&(a[n]=r=o.objCreate(t[n]),e&&i.hop.call(e,n)&&i.extend(r,e[n]));return a},r.prototype._resolveLocale=function(t){"string"==typeof t&&(t=[t]),t=(t||[]).concat(r.defaultLocale);var e,n,i,o,a=r.__localeData__;for(e=0,n=t.length;e<n;e+=1)for(i=t[e].toLowerCase().split("-");i.length;){if(o=a[i.join("-")])return o.locale;i.pop()}var s=t.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+t.join(", ")+", or the default locale: "+s)}},/*!****************************************!*\
  !*** ./~/intl-messageformat/lib/en.js ***!
  \****************************************/
function(t,e){"use strict";e["default"]={locale:"en",pluralRuleFunction:function(t,e){var n=String(t).split("."),r=!n[1],i=Number(n[0])==t,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return e?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==t&&r?"one":"other"}}},/*!*****************************************!*\
  !*** ./~/intl-messageformat/lib/es5.js ***!
  \*****************************************/
function(t,e,n){"use strict";var r=n(/*! ./utils */11),i=function(){try{return!!Object.defineProperty({},"a",{})}catch(t){return!1}}(),o=(!i&&!Object.prototype.__defineGetter__,i?Object.defineProperty:function(t,e,n){"get"in n&&t.__defineGetter__?t.__defineGetter__(e,n.get):(!r.hop.call(t,e)||"value"in n)&&(t[e]=n.value)}),a=Object.create||function(t,e){function n(){}var i,a;n.prototype=t,i=new n;for(a in e)r.hop.call(e,a)&&o(i,a,e[a]);return i};e.defineProperty=o,e.objCreate=a},/*!******************************************!*\
  !*** ./~/intl-messageformat/lib/main.js ***!
  \******************************************/
function(t,e,n){"use strict";var r=n(/*! ./core */21),i=n(/*! ./en */22);r["default"].__addLocaleData(i["default"]),r["default"].defaultLocale="en",e["default"]=r["default"]},/*!**********************************************************!*\
  !*** ./~/json-loader!./~/yaml-loader!./src/lang/en.yaml ***!
  \**********************************************************/
function(t,e){t.exports={en:{prompt:"Enter message...",thinking:"Agent is thinking...",reconnect:"Attempting to reconnect...",anything_else:"Is there anything else I can help you with?",list_sep:", ",basic_err:"I am sorry, I am having difficulties.",loading_failure1:'<span class="IBMChat-loading-failure-message-text">I cannot complete your request. You can try a new request or <a class="IBMChat-loading-retry-link" data-retry="true" href="javascript:void(false);">restart the conversation.</a></span>',loading_failure2:'<span class="IBMChat-loading-failure-message-text">I cannot complete your request. Please <a class="IBMChat-loading-retry-link" data-retry="true" href="javascript:void(false);">restart the conversation.</a></span>',submit:"Submit",cancel:"Cancel",required_field:"This field is required.",placeholder_mon:"MM",placeholder_year:"YYYY",cc_name:"Name on Card",cc_num:"Credit Card Number",cc_exp_mon:"Expiration Date Month",cc_exp_year:"Expiration Date Year",cc_code:"CVV",cc_use_valid:"Please use a valid card. We accept the following: ",cc_invalid:"Your credit card number is invalid.",cc_invalid_exp:"Your credit card expiration date is invalid.",cc_invalid_code:"Your CVV is invalid.",loc_curr:"Current Location",postal_code:"Zip Code",loc_prompt:"Please share your current location.",loc_share:"Your browser is asking you to share your location...",loc_share_granted:"You have allowed your browser to share your current location.",loc_looking:"Looking up your current location...",loc_share_denied:"You have denied sharing your location on this website.",loc_not_shared_prompt:"Please enable location sharing or continue with your Zip Code.",loc_all:"All Locations",loc_closed_today:"Closed today.",loc_open_today:"Open today",loc_open_today_more:'<span class="{ns}-hours-open">Open today:</span><span class="{ns}-hours-today"> {open, time, short} &ndash; {close, time, short}</span>',loc_hours_open:'<span class="{ns}-days-hours-day">{openDay, date, weekday_short}:</span>&nbsp;<span class="{ns}-days-hours-hours">{open, time, short} &ndash; {close, time, short}</span>',loc_hours_open_multiday:'<span class="{ns}-days-hours-day">{openDay, date, weekday_short}&ndash;{closeDay, date, weekday_short}:</span>&nbsp;<span class="{ns}-days-hours-hours">{open, time, short} &ndash; {close, time, short}</span>',loc_hours_unknown:'<span class="{ns}-days-hours-day">{day, date, weekday_short}:</span>&nbsp;<span class="{ns}-days-hours-hours">Hours unknown</span>',loc_hours_closed:'<span class="{ns}-days-hours-day">{day, date, weekday_short}:</span>&nbsp;<span class="{ns}-days-hours-hours">Closed</span>',loc_nearby_none:"We could not find any locations close to you.",loc_nearby_single:"Here are the details for this location:",loc_nearby_list:"Here are the locations I found close to you:",google_maps_url:"https://maps.google.com/",dist_miles:"{distance}m",dist_km:"{distance}km"}}},/*!****************************!*\
  !*** ./~/lodash/_apply.js ***!
  \****************************/
function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},/*!************************************!*\
  !*** ./~/lodash/_arrayLikeKeys.js ***!
  \************************************/
function(t,e,n){function r(t,e){var n=a(t)||o(t)?i(t.length,String):[],r=n.length,c=!!r;for(var u in t)!e&&!l.call(t,u)||c&&("length"==u||s(u,r))||n.push(u);return n}var i=n(/*! ./_baseTimes */30),o=n(/*! ./isArguments */36),a=n(/*! ./isArray */37),s=n(/*! ./_isIndex */13),c=Object.prototype,l=c.hasOwnProperty;t.exports=r},/*!*******************************!*\
  !*** ./~/lodash/_baseKeys.js ***!
  \*******************************/
function(t,e,n){function r(t){if(!i(t))return o(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}var i=n(/*! ./_isPrototype */14),o=n(/*! ./_nativeKeys */34),a=Object.prototype,s=a.hasOwnProperty;t.exports=r},/*!*******************************!*\
  !*** ./~/lodash/_baseRest.js ***!
  \*******************************/
function(t,e,n){function r(t,e){return e=o(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,a=o(n.length-e,0),s=Array(a);++r<a;)s[r]=n[e+r];r=-1;for(var c=Array(e+1);++r<e;)c[r]=n[r];return c[e]=s,i(t,this,c)}}var i=n(/*! ./_apply */26),o=Math.max;t.exports=r},/*!********************************!*\
  !*** ./~/lodash/_baseTimes.js ***!
  \********************************/
function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},/*!*********************************!*\
  !*** ./~/lodash/_copyObject.js ***!
  \*********************************/
function(t,e,n){function r(t,e,n,r){n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],c=r?r(n[s],t[s],s,n,t):void 0;i(n,s,void 0===c?t[s]:c)}return n}var i=n(/*! ./_assignValue */12);t.exports=r},/*!*************************************!*\
  !*** ./~/lodash/_createAssigner.js ***!
  \*************************************/
function(t,e,n){function r(t){return i(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var c=n[r];c&&t(e,c,r,a)}return e})}var i=n(/*! ./_baseRest */29),o=n(/*! ./_isIterateeCall */33);t.exports=r},/*!*************************************!*\
  !*** ./~/lodash/_isIterateeCall.js ***!
  \*************************************/
function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;return!!("number"==r?o(n)&&a(e,n.length):"string"==r&&e in n)&&i(n[e],t)}var i=n(/*! ./eq */15),o=n(/*! ./isArrayLike */8),a=n(/*! ./_isIndex */13),s=n(/*! ./isObject */16);t.exports=r},/*!*********************************!*\
  !*** ./~/lodash/_nativeKeys.js ***!
  \*********************************/
function(t,e,n){var r=n(/*! ./_overArg */35),i=r(Object.keys,Object);t.exports=i},/*!******************************!*\
  !*** ./~/lodash/_overArg.js ***!
  \******************************/
function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},/*!*********************************!*\
  !*** ./~/lodash/isArguments.js ***!
  \*********************************/
function(t,e,n){function r(t){return i(t)&&s.call(t,"callee")&&(!l.call(t,"callee")||c.call(t)==o)}var i=n(/*! ./isArrayLikeObject */38),o="[object Arguments]",a=Object.prototype,s=a.hasOwnProperty,c=a.toString,l=a.propertyIsEnumerable;t.exports=r},/*!*****************************!*\
  !*** ./~/lodash/isArray.js ***!
  \*****************************/
function(t,e){var n=Array.isArray;t.exports=n},/*!***************************************!*\
  !*** ./~/lodash/isArrayLikeObject.js ***!
  \***************************************/
function(t,e,n){function r(t){return o(t)&&i(t)}var i=n(/*! ./isArrayLike */8),o=n(/*! ./isObjectLike */41);t.exports=r},/*!********************************!*\
  !*** ./~/lodash/isFunction.js ***!
  \********************************/
function(t,e,n){function r(t){var e=i(t)?c.call(t):"";return e==o||e==a}var i=n(/*! ./isObject */16),o="[object Function]",a="[object GeneratorFunction]",s=Object.prototype,c=s.toString;t.exports=r},/*!******************************!*\
  !*** ./~/lodash/isLength.js ***!
  \******************************/
function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},/*!**********************************!*\
  !*** ./~/lodash/isObjectLike.js ***!
  \**********************************/
function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},/*!**************************!*\
  !*** ./~/lodash/keys.js ***!
  \**************************/
function(t,e,n){function r(t){return a(t)?i(t):o(t)}var i=n(/*! ./_arrayLikeKeys */27),o=n(/*! ./_baseKeys */28),a=n(/*! ./isArrayLike */8);t.exports=r},/*!******************************************************!*\
  !*** ./src/layouts/cc-validator/templates/base.html ***!
  \******************************************************/
function(t,e){t.exports='<div class="${ns}-container IBMChat-secondary-colors"> <div class="${ns}-row"> <fieldset aria-describedby="cc_full_name_${uuid}_error"> <label class="IBMChat-screen-reader-text" for="cc_full_name_${uuid}">${cc_name}</label> <input type="text" class="IBMChat-input-colors" id="cc_full_name_${uuid}" name="cc_full_name" placeholder="${cc_name}"/> <div id="cc_full_name_${uuid}_error" class="IBMChat-validation-error IBMChat-error-colors" data-validation-for="cc_full_name" data-valid="true" style="display:none;"></div> </fieldset> </div> <div class="${ns}-row"> <fieldset aria-describedby="cc_number_${uuid}_error"> <label class="IBMChat-screen-reader-text" for="cc_number_${uuid}">${cc_num}</label> <input type="text" class="IBMChat-input-colors" id="cc_number_${uuid}" name="cc_number" placeholder="${cc_num}"/> <div id="cc_number_${uuid}_error" class="IBMChat-validation-error IBMChat-error-colors" data-validation-for="cc_number" data-valid="true" style="display:none;"></div> </fieldset> </div> <div class="${ns}-row"> <div class="${ns}-col"> <fieldset aria-describedby="cc_exp_date_${uuid}_error"> <label class="IBMChat-screen-reader-text" for="cc_exp_date_month_${uuid}">${cc_exp_mon}</label> <input class="${ns}-date IBMChat-input-colors" type="text" id="cc_exp_date_month_${uuid}" name="cc_exp_date_month" placeholder="${placeholder_mon}" size="3" /> <label class="IBMChat-screen-reader-text" for="cc_exp_date_year_${uuid}">${cc_exp_year}</label> <input class="${ns}-date IBMChat-input-colors" type="text" id="cc_exp_date_year_${uuid}" name="cc_exp_date_year" placeholder="${placeholder_year}" size="5" /> </fieldset> </div> <div class="${ns}-col"> <fieldset aria-describedby="cc_code_${uuid}_error"> <label class="IBMChat-screen-reader-text" for="cc_code_${uuid}">${cc_code}</label> <input class="${ns}-cvv IBMChat-input-colors" type="text" id="cc_code_${uuid}" name="cc_code" placeholder="${cc_code}" size="5"/> </fieldset> </div> <div id="cc_exp_date_${uuid}_error" class="IBMChat-validation-error IBMChat-error-colors" data-validation-for="cc_exp_date" data-valid="true" style="display:none;"></div> <div id="cc_code_${uuid}_error" class="IBMChat-validation-error IBMChat-error-colors" data-validation-for="cc_code" data-valid="true" style="display:none;"></div> </div> <div class="${ns}-buttons"> <button class="${ns}-cancel">${cancel}</button> <button class="${ns}-submit">${submit}</button> </div></div>'},/*!**************************************************************!*\
  !*** ./src/layouts/choose-location-type/templates/base.html ***!
  \**************************************************************/
function(t,e){t.exports='<div class="${ns}-container"> <div><button class="IBMChat-accent-colors-button" data-input="${values.geolocation}">${loc_curr}</button></div> <div><button class="IBMChat-accent-colors-button" data-input="${values.postalcode}">${postal_code}</button></div></div>'},/*!**************************************************!*\
  !*** ./src/layouts/choose/templates/button.html ***!
  \**************************************************/
function(t,e){t.exports='<button class="IBMChat-accent-colors-button" data-input="${text}">${text}</button>'},/*!**************************************************!*\
  !*** ./src/layouts/choose/templates/submit.html ***!
  \**************************************************/
function(t,e){t.exports="<button>${text}</button>"},/*!***********************************************!*\
  !*** ./src/layouts/error/templates/base.html ***!
  \***********************************************/
function(t,e){t.exports='<div class="IBMChat-error IBMChat-error-colors"></div>'},/*!**********************************************!*\
  !*** ./src/layouts/form/templates/base.html ***!
  \**********************************************/
function(t,e){t.exports='<div class="IBMChat-form-container IBMChat-secondary-colors"> <div class="IBMChat-form-fields"></div> <div class="IBMChat-form-buttons"> <button class="IBMChat-form-cancel">${cancel}</button> <button class="IBMChat-form-submit">${submit}</button> </div></div>'},/*!***********************************************!*\
  !*** ./src/layouts/form/templates/field.html ***!
  \***********************************************/
function(t,e){t.exports='<fieldset aria-describedby="${name}_${uuid}_error"> <label for="${name}_${uuid}">${label}</label> <input type="${type}" class="IBMChat-input-colors" id="${name}_${uuid}" name="${name}" value="${value}" data-index="${index}"/> <div id="${name}_${uuid}_error" class="IBMChat-validation-error IBMChat-error-colors" style="display:none;" data-validation-for="${name}" data-valid="true"></div></fieldset>'},/*!*********************************************************************!*\
  !*** ./src/layouts/show-locations/templates/add-location-item.html ***!
  \*********************************************************************/
function(t,e){t.exports='<div class="${ns}-locations-item ${ns}-data-section"> <div class="${ns}-locations-item-data-title"></div> <div class="${ns}-data-float-holder"> <div class="${ns}-locations-item-data"> <div class="${ns}-locations-item-data-items"> <div class="${ns}-locations-item-data-section"> <a class="${ns}-locations-item-data-address-link"> <div class="${ns}-locations-item-data-address"></div> </a> </div> <div class="IBMChat-small-hide"> <div class="${ns}-locations-item-data-hours"></div> <div class="${ns}-locations-item-data-timezone"></div> <div class="${ns}-locations-item-data-more-hours"></div> </div> </div> </div> <div class="${ns}-locations-item-data"> <div class="${ns}-locations-item-data-items"> <div class="${ns}-locations-item-data-phone"></div> <div class="${ns}-locations-item-data-email"></div> </div> </div> <div class="${ns}-locations-item-distance"></div> </div> <div> <div class="${ns}-locations-item-data-items"> <div class="IBMChat-small-show"> <div class="${ns}-locations-item-data-hours"></div> <div class="${ns}-locations-item-data-timezone"></div> <div class="${ns}-locations-item-data-more-hours"></div> </div> </div> <div class="${ns}-locations-all-holder"> <button class="${ns}-locations-all IBMChat-accent-colors-button">${loc_all}</button> </div> </div></div>'},/*!**********************************************************************!*\
  !*** ./src/layouts/show-locations/templates/add-locations-item.html ***!
  \**********************************************************************/
function(t,e){t.exports='<button aria-label="${address}" class="${ns}-locations-item ${ns}-multiple-locations ${ns}-data-section"> <div class="${ns}-locations-row"> <div class="${ns}-locations-item-icon-holder ${ns}-locations-cell"> <div class="${ns}-locations-item-icon" style="color: ${accentText}; background: ${accentBackground};">${iconText}</div> </div> <div class="${ns}-locations-cell"> <div class="${ns}-locations-item-data-title">${title}</div> <div class="${ns}-locations-item-data-items"> <div class="${ns}-locations-item-data-address">${address}</div> <div class="${ns}-locations-item-distance">${distance}</div> </div> </div> </div></button>'},/*!********************************************************!*\
  !*** ./src/layouts/show-locations/templates/base.html ***!
  \********************************************************/
function(t,e){t.exports='<div class="${ns}"> <div class="${ns}-img"></div> <div class="${ns}-data"></div></div>'},/*!********************************************************************!*\
  !*** ./src/layouts/show-locations/templates/create-dom-array.html ***!
  \********************************************************************/
function(t,e){t.exports='<div class="${ns}-contact-type"></div><div class="${ns}-contact-data"></div>'},/*!******************************************************************!*\
  !*** ./src/layouts/show-locations/templates/hours-timezone.html ***!
  \******************************************************************/
function(t,e){t.exports='<div class="${ns}-hours-timezone">( ${timezone} )</div>'},/*!**********************************************************************!*\
  !*** ./src/layouts/show-locations/templates/hours-today-closed.html ***!
  \**********************************************************************/
function(t,e){t.exports='<span class="${ns}-hours-open">${loc_closed_today}</span>'},/*!***********************************************************************!*\
  !*** ./src/layouts/show-locations/templates/hours-today-unknown.html ***!
  \***********************************************************************/
function(t,e){t.exports='<span class="${ns}-hours-open">${loc_open_today}</span>'},/*!************************!*\
  !*** ./src/styles.css ***!
  \************************/
function(t,e){t.exports='.IBMChat { height: 100%; width: 100%;}/* utils */.IBMChat-hidden { display: none;}.IBMChat-relative { position: relative;}.IBMChat-outer-container { border: none; box-sizing: border-box; display: table; table-layout: fixed; font-weight: normal; line-height: 1em; height: 100%; margin: 0 auto 0 auto; max-width: 768px; min-height: 300px; min-width: 288px; padding: 0; position: relative; text-align: left; width: 100%;}/* Agent Component */.IBMChat-inner-container { display: table-cell; height: 100%; margin: 0; padding: 0 1em 0 1em; vertical-align: bottom;}/* Chat Component */.IBMChat-chat-container { display: table-row; margin: 0; padding: 0;}/* Messages Component */.IBMChat-messages { height: auto; overflow-x: hidden; overflow-y: auto; padding: 0 1em 0 1em;}.IBMChat-messages label { display: block; font-weight: bold; text-transform: capitalize;}.IBMChat-messages input { border: 0; border-radius: 0; font-size: 1em; margin: 0; padding: 0 0 0.25em 0;}.IBMChat-messages button { background: none; border: 0; border-radius: 1em; color: inherit; cursor: pointer; font: inherit; line-height: 1.5em; margin: 0; overflow: hidden; padding: 0.25em 1em 0.25em 1em; text-overflow: ellipsis; white-space: nowrap; -webkit-appearance: button; /* for input */ -webkit-user-select: none; /* for button */ -moz-user-select: none; -ms-user-select: none;}.IBMChat-messages button[disabled="true"] { cursor: default; opacity: .7;}.IBMChat-messages button[disabled="true"]:focus { outline: none;}.IBMChat-messages button::-moz-focus-inner { border: 0; padding: 0;}.IBMChat-watson-intent a { display: inline-block; margin: 1em 0 1em 0;}/* WatsonMessage Component */.IBMChat-watson-message-container { margin: 1em 0 1em 0; position: relative;}.IBMChat-watson-message { line-height: 1.5em; min-height: 1.5em; padding: 0 0 0 1em; word-wrap: break-word;}.IBMChat-watson-message a { display: inline-block; word-break: break-all;}.IBMChat-watson-message-line { left: 0; height: 1.5em; position: absolute; top: 0;}.IBMChat-disabled-layout { opacity: 0.7;}/* UserMessage Component */.IBMChat-user-message-container {\tmargin: 1em 0 1em 2em;\ttext-align: right;}.IBMChat-user-message { border-radius: 4px; display: inline-block; line-height: 1.5em; padding: 0.5em 0.75em 0.5em 0.75em; text-align: left; max-width: 100%; overflow: hidden; word-wrap: break-word;}/* Input Component */.IBMChat-input-container { display: table-row; margin: 0; padding: 0;}.IBMChat-input-form { display: table-cell; position: relative; min-height: 30px;}.IBMChat-chat-textbox-container { min-height: 30px; padding: 1em 2em 2em 2em;}.IBMChat-chat-textbox-clone-holder { height: 0; overflow: hidden;}.IBMChat-chat-textbox-clone { border-bottom: 1px solid transparent; font-weight: normal; line-height: 1.5em; margin: 0; min-height: 26px; padding: 0; position: relative; white-space: pre-wrap; white-space: pre-line; word-wrap: break-word; visibility: hidden;}.IBMChat-chat-textbox { background: transparent; border: none; border-radius: 0; border-image-width: 0; color: inherit; font-weight: normal; height: 1.5em; line-height: 1.5em; margin: 0; min-height: 26px; overflow: hidden; padding: 0 0 3px 0; resize: none; text-wrap: unrestricted; vertical-align: bottom; width: 100%; white-space: pre-wrap; white-space: pre-line; word-wrap: break-word;}.IBMChat-chat-textbox[disabled=\'disabled\'] { opacity: 0.5;}.IBMChat-input-form::-webkit-input-placeholder { opacity: 1;}.IBMChat-chat-textbox:focus {\toutline: none;\tpadding: 0 0 2px 0;}/* Layout Component */.IBMChat-watson-layout { padding: 4px;}/* validation error message */.IBMChat-validation-error { padding: 0.5em; font-size: 0.9em;}/* class to hide an element from everyone but screen readers for visually impared */.IBMChat-screen-reader-text {\tclip: rect(1px, 1px, 1px, 1px);\theight: 1px;\twidth: 1px;\toverflow: hidden;\tposition: absolute !important;}/* Loading */.IBMChat-loading-container { margin-bottom: 1em;}.IBMChat-loading { min-height: 30px; position: relative;}.IBMChat-loading-icon { height: 30px; position: absolute; top: 0; left: -4px; width: 10px;}.IBMChat-loading-icon svg { height: 30px; width: 10px;}.IBMChat-loading-message { display: inline-block; min-height: 30px; line-height: 1.2em; padding: 5px 1em 0 1em;}.IBMChat-bouncing { animation: bounceBack 420ms infinite; animation-direction: alternate; animation-timing-function: ease-in-out; animation-timing-function: cubic-bezier(.42,0,1,1);}.IBMChat-bouncing:nth-child(2) { animation: bounce 420ms infinite; animation-direction: alternate; animation-timing-function: ease-in-out; animation-timing-function: cubic-bezier(.42,0,1,1);}@keyframes bounce { 0% { transform: translateY(5px); } 72% { transform: translateY(-5px); } 72%,100%{ transform: translateY(-5px); }}@keyframes bounceBack { 0% { transform: translateY(-5px); } 72% { transform: translateY(5px); } 72%,100%{ transform: translateY(5px); }}/* responsive */.IBMChat-small-show { display: unset;}.IBMChat-small-hide { display: none;}.IBMChat-isLarge .IBMChat-small-show { display: none;}.IBMChat-isLarge .IBMChat-small-hide { display: unset;}/* cc-validator */.IBMChat-creditcard-container { margin-top: 1em; padding: 1em 1.5em 1em 1.5em; width: 240px;}.IBMChat-creditcard-container fieldset { border:none; margin:0; padding:0;}.IBMChat-creditcard-row { padding-bottom: 1em;}.IBMChat-creditcard-row input[name="cc_full_name"], .IBMChat-creditcard-row input[name="cc_number"] { width: 100%;}.IBMChat-creditcard-row input[name="cc_exp_date_month"] { max-width: 32px;}.IBMChat-creditcard-row input[name="cc_exp_date_year"], .IBMChat-creditcard-row input[name="cc_code"] { max-width: 64px;}.IBMChat-creditcard-col { display: inline-block;}.IBMChat-creditcard-col:nth-child(2) { padding-left:1.5em;}.IBMChat-creditcard-buttons:after { visibility: hidden; display: block; font-size: 0; content: " "; clear: both; height: 0;}.IBMChat-creditcard-buttons button { width: 95px; float: left; text-overflow: clip;}.IBMChat-creditcard-buttons button:last-child { float: right; text-overflow: clip;}/* choose */.IBMChat-choose-container > div {\tmargin-top: 1em;}/* choose location type */.IBMChat-islocationapi-container > div {\tmargin-top: 1em;}/* error */.IBMChat-error { padding: 0.5em 1em 0.5em 1em;}/* form */.IBMChat-form-container { margin-top: 1em; padding: 1em 1.5em 1em 1.5em; width: 240px;}.IBMChat-form-container fieldset { border:none; margin:0; padding:0;}.IBMChat-form-fields { width:100%;}.IBMChat-form-fields-row { padding-bottom:1.5em;}.IBMChat-form-fields-row input { width: 100%;}.IBMChat-form-buttons { text-align:center; width: 100%;}.IBMChat-form-buttons:after { visibility: hidden; display: block; font-size: 0; content: " "; clear: both; height: 0;}.IBMChat-form-cancel { float:left; max-width: 50%;}.IBMChat-form-submit { float:right; max-width: 50%;}/* locations */.IBMChat-map { margin-top: 1em;}.IBMChat-map-data { font-size:0.85em;}.IBMChat-map-img { overflow: hidden;}.IBMChat-map-img img { margin: 0 0 0.5em 0; height: 120px;}.IBMChat-map-multiple-locations { cursor: default; display: table; width: 100%;}.IBMChat-map-multiple-locations .IBMChat-map-locations-row { display:table-row; width: 100%;}.IBMChat-map-multiple-locations .IBMChat-map-locations-cell { display: table-cell; overflow: hidden; word-wrap: break-word;}.IBMChat-map-location-active .IBMChat-map-multiple-locations { opacity: 1;}.IBMChat-map-locations-item.IBMChat-map-multiple-locations { padding: 0.5em 0 0.5em 0; white-space: normal;}.IBMChat-disabled-layout .IBMChat-map-locations-item.IBMChat-map-multiple-locations { cursor: default;}.IBMChat-map-data-section { margin-top:0.5em;}.IBMChat-map-data-float-holder:after { visibility: hidden; display: block; font-size: 0; content: " "; clear: both; height: 0;}.IBMChat-map-locations-item { border-bottom:1px solid #505050; text-align:left; padding: 1em;}.IBMChat-map-locations-item-icon-holder { text-align:center; width: 40px;}.IBMChat-map-locations-item-icon { border-radius: 24px; height:24px; line-height: 24px; margin-right:8px; width:24px;}.IBMChat-map-locations-item-data {}.IBMChat-map-locations-item-data-title { font-size:1.3em; font-weight:300; line-height:1.2em;}.IBMChat-map-locations-item-data-section { padding-bottom:0.5em;}.IBMChat-map-locations-item-data-email { padding-bottom:0;}.IBMChat-map-locations-item-data-phone { display: table; max-width:400px; width: 100%;}.IBMChat-map-contact-row { padding-bottom:0.5em;}.IBMChat-map-contact-type { font-size:0.9em;}.IBMChat-map-locations-item-distance { font-size:0.9em; width:64px;}button.IBMChat-map-locations-all { font-size:0.9em; line-height:1.5em; margin: 1em 0 0 0; padding: 0 0.5em 0 0.5em;}.IBMChat-map-hours-open { font-weight: bold;}.IBMChat-map-days-hours-day, .IBMChat-map-days-hours-hours, .IBMChat-map-days-hours-closed { overflow: hidden; word-wrap: break-word;}.IBMChat-map-days-hours-day { font-weight: bold;}.IBMChat-map-hours-timezone { font-size: 0.8em; padding-bottom: 0.5em;}.IBMChat-map-locations-item-data-hours { margin-top:0.5em;}.IBMChat-isLarge .IBMChat-map-locations-item-data { float:left; padding-right:5%; width:45%;}.IBMChat-isLarge .IBMChat-map-locations-item-data-hours { margin-top:0;}.IBMChat-isLarge .IBMChat-map-locations-item-data-more-hours { margin-top:0.5em;}'},/*!**********************************!*\
  !*** ./src/templates/input.html ***!
  \**********************************/
function(t,e){t.exports='<form class="IBMChat-input-form"> <div class="IBMChat-chat-text-container"> <div class="IBMChat-chat-textbox-container"> <textarea aria-labelledby="Enter a Message" class="IBMChat-chat-textbox" placeholder="${placeholder}"></textarea> <div class="IBMChat-chat-textbox-clone-holder"> <div class="IBMChat-chat-textbox-clone" aria-hidden="true">${placeholder}</div> </div> </div> </div></form>'},/*!************************************!*\
  !*** ./src/templates/loading.html ***!
  \************************************/
function(t,e){t.exports='<section class="IBMChat-loading-container"> <div class="IBMChat-loading IBMChat-hidden"> <div class="IBMChat-loading-icon" aria-hidden="true"> <svg xmlns="http://www.w3.org/2000/svg"> <circle class="IBMChat-ball IBMChat-bouncing" cx="5px" cy="10px" r="2.5"/> <circle class="IBMChat-ball IBMChat-bouncing" cx="5px" cy="20px" r="2.5"/> <circle class="IBMChat-ball" cx="5px" cy="15px" r="2.5"/> </svg> </div> <div class="IBMChat-loading-message"> <span class="IBMChat-loading-message-text"></span> <span class="IBMChat-loading-message-retry"> <span class="IBMChat-loading-retry-message IBMChat-hidden">${retryAttempt}</span> </span> </div> </div> <div class="IBMChat-loading-failure-message IBMChat-watson-message-container IBMChat-hidden"> <div class="IBMChat-watson-message-line"></div> <div class="IBMChat-watson-message"></div> </div></section>'},/*!************************************!*\
  !*** ./src/templates/receive.html ***!
  \************************************/
function(t,e){t.exports='<div class="IBMChat-watson-message-container"></div>'},/*!*********************************!*\
  !*** ./src/templates/send.html ***!
  \*********************************/
function(t,e){t.exports='<div id="${data.uuid}" class="IBMChat-user-message-container"> <div class="IBMChat-user-message IBMChat-secondary-colors"></div></div>'},/*!**********************************!*\
  !*** ./src/templates/start.html ***!
  \**********************************/
function(t,e){t.exports='<div class="IBMChat"> <div class="IBMChat-outer-container IBMChat-default-colors"> <div class="IBMChat-fade"></div> <div class="IBMChat-chat-container"> <div class="IBMChat-inner-container"> <div class="IBMChat-messages"></div> </div> </div> </div></div>'},/*!**************************!*\
  !*** ./src/bootstrap.js ***!
  \**************************/
function(t,e,n){function r(t,e){_.subscribe("start",x.start),_.subscribe("chatID",x.chatID),_.subscribe("resize",x.resize),_.subscribe("disable-input",x.input.disableInput),_.subscribe("enable-loading",x.input.enableLoadingInput),_.subscribe("disable-loading",x.input.disableLoadingInput),_.subscribe("scroll-to-bottom",x.scrollToBottom),_.subscribe("receive",x.receive),e===!0?_.subscribe("send",x.sendMock):(_.subscribe("clear",x.clear),_.subscribe("send",x.send.send),_.subscribe("retry",x.send.retry),_.subscribe("send-input-message",x.sendInputMessage),_.subscribe("enable-retry",x.error.retry),_.subscribe("enable-input",x.input.enableInput),_.subscribe("focus-input",x.input.focusInput),_.subscribe("send-mock",x.sendMock),_.subscribe("error-clear",x.error.clearError),_.subscribe("reset",x.reset)),t===!0&&(_.subscribe("try-it-error",x.error.tryIt),_.subscribe("try-it-layout-subscription",x.tryIt.layoutError),_.subscribe("try-it-action-subscription",x.tryIt.actionError),_.subscribe("try-it-receive-intent-data",x.tryIt.intent))}function i(){a("show-locations",y.showLocations.init,!0),a("choose-location-type",y.chooseLocationType.init,!0),a("request-geolocation-latlong",y.requestGeolocationLatlong.init,!0),a("request-geolocation-zipcode",y.requestGeolocationZipcode.init,!0),a("choose",y.choose.init,!0),a("form",y.form.init,!0),a("cc-validator",y.creditCard.init,!0),a("error",y.error.init,!0);for(var t=0;t<A.length;t++)k[A[t]]()}function o(t){var e=w.get();if(e.active===!0)return g().then(function(){return o(t)});var n="string"==typeof t.el?document.getElementById(t.el):t.el,a=B.getSDKConfig(t),s=t.locale||"en";if(w.set({locale:s}),t.langBundle&&"object"==typeof t.langBundle){var c=t.langBundle[s];c||(console.error("Could not find language bundle for "+s+". Defaulting to English."),s="en",c=t.langBundle.en),w.set({locale:s,langBundle:c})}return new window.Promise(function(e,o){var s={active:!0,root:n,mapsServer:"https://dp1-i-serve-maps.mybluemix.net",botID:t.botID,styles:E({},S,t.styles),baseURL:a.baseURL||"https://api.ibm.com/virtualagent/run/api/v1/",originalContent:n.innerHTML,handleInput:{"default":!0},minSeconds:t.minSeconds||0===t.minSeconds?t.minSeconds:.75,chatStyleID:"chatStyleID-"+B.getUUID(),tryIt:t.tryIt||!1,playback:t.playback||!1};B.checkRoot(n)?(t.errorHandler?_.subscribe("httpError",t.errorHandler,t.errorHandlerContext):_.subscribe("httpError",x.error.httpError),r(t.tryIt,t.playback),i(),t.playback===!0?(_.publish("start",s),setTimeout(function(){_.publish("chatID","playback")},0),setTimeout(function(){e()},0)):t.botID?(_.publish("start",s),_.publish("enable-loading"),_.publish("disable-input"),C.configure(a).start(t.botID).then(function(t){_.publish("chatID",t.chatID),_.publish("receive",t)})["catch"](function(t){_.publish("httpError",t)}).then(function(){setTimeout(function(){_.publish("enable-input"),e()},0)})):(console.error("BotID is required!"),g(),o({error:"BotID is required!"}))):(console.error("Element for chat does not exist!"),g(),o({error:"Element for chat does not exist!"}))})}function a(t,e,n){t&&e&&"function"==typeof e?A.indexOf(t)!==-1&&n||(A.push(t),k[t]=e):console.error("registerLayout was configured incorrectly.")}function s(t){if(t){var e=w.get();e.active&&_.publish("send",{text:t})}else console.error("The message was empty.")}function c(t){if(t){var e=w.get();e.active&&_.publish("receive",t)}else console.error("The message was empty.")}function l(t){if(t){var e=w.get();e.active&&_.publish("send-mock",{text:t})}else console.error("The message was empty.")}function u(t){if(t){var e=w.get();e.active&&_.publish("send",{text:t,silent:!0})}else console.error("The message was empty.")}function d(t){t&&t.callback&&"function"==typeof t.callback?w.set({handleInput:{"default":!1,callback:t.callback,context:t.context}}):console.error("Invalid configuration of enableCustomInputHandler")}function h(){w.set({handleInput:{"default":!0}})}function p(){var t=w.get();t.active&&_.publish("focus-input")}function f(){var t=w.get();t.active&&_.publish("disable-input")}function m(){var t=w.get();t.active&&_.publish("enable-input")}function v(){w.set({DEBUG:!0})}function g(){return new window.Promise(function(t){var e=w.get();e.active&&(L.removeStyles(e.root,e.chatStyleID,e.chatID),e.root&&e.onResize&&(B.removeResizeListener(e.root,e.onResize),B.endVisibilityCheck(),"undefined"!=typeof e.originalContent&&e.root&&(e.root.innerHTML=e.originalContent)),_.publish("destroy"),_.destroy(),w.destroy()),t()})}function b(){return console.warn("The IBMChat.restart method is deprecated. Use IBMChat.clear() instead."),new window.Promise(function(t,e){var n=w.get();g().then(function(){setTimeout(function(){o({el:n.root,botID:n.botID,baseURL:n.baseURL}).then(function(){t()})["catch"](function(t){e(t)})},10)})["catch"](function(t){e(t)})})}var y=n(/*! ./layouts */85),_=n(/*! ./events */1),x=n(/*! ./events/handlers */68),C=n(/*! @watson-virtual-agent/client-sdk/lib/web */5),w=n(/*! ./state */2),I=n(/*! ./context */64),B=n(/*! ./utils */3),M=n(/*! ./profile */9),E=n(/*! lodash/assign */6),L=n(/*! ./styles */10),S=L.defaultStyles,k={},A=[];t.exports={profile:M,init:o,registerLayout:a,send:s,receive:c,sendMock:l,sendSilently:u,enableCustomInputHandler:d,disableCustomInputHandler:h,focusInput:p,disableInput:f,enableInput:m,subscribe:_.subscribe,subscribeOnce:_.subscribeOnce,publish:_.publish,debug:v,destroy:g,restart:b,currentSubscriptions:_.currentSubscriptions,hasSubscription:_.hasSubscription,completeEvent:_.completeEvent,state:w,context:I,clear:function(){_.publish("restart")}}},/*!******************************!*\
  !*** ./src/context/index.js ***!
  \******************************/
function(t,e,n){function r(t){o.set({context:t})}function i(){var t=o.get();return t.context}var o=n(/*! ../state */2);t.exports={set:r,get:i}},/*!***************************************!*\
  !*** ./src/events/handlers/chatid.js ***!
  \***************************************/
function(t,e,n){function r(t){var e=i.get(),n="chatID-",r=e.root.className.split(" ").filter(function(t){return 0!==t.lastIndexOf(n,0)});i.set({chatID:t}),e.root.className=r.join(" ").trim(),e.root.classList.add(n+t)}var i=n(/*! ../../state */2);t.exports=r},/*!**************************************!*\
  !*** ./src/events/handlers/clear.js ***!
  \**************************************/
function(t,e,n){function r(){var t=i.get();i.set({messages:[]}),t.root.classList.add("chatID-"+t.chatID),t.input.value="",t.inputClone.innerHTML=a("prompt"),t.chatHolder.innerHTML="",o.publish("resize-input"),o.publish("resize")}var i=n(/*! ../../state */2),o=n(/*! ../../events */1),a=n(/*! ../../utils/i18n */4);t.exports=r},/*!**************************************!*\
  !*** ./src/events/handlers/error.js ***!
  \**************************************/
function(t,e,n){function r(t){var e=d[t];return e&&"function"==typeof e?e():e}function i(){setTimeout(function(){var t=l.get(),e=t.root.querySelector(".IBMChat-loading-container");e&&t.chatHolder.removeChild(e),l.set({errorCount:0})},0)}function o(t){setTimeout(function(){console.error(t);var e=l.get(),n=(t.status?r(t.status):null)||r("basic"),i=e.errorCount||0;c.publish("enable-loading",n),l.set({errorCount:i+1}),c.publish("enable-retry")},0)}function a(){setTimeout(function(){var t=l.get(),e=t.errorCount,n=t.root.querySelector(".IBMChat-loading-retry-message"),r=t.root.querySelector(".IBMChat-loading"),i=t.root.querySelector(".IBMChat-loading-failure-message"),o=i.querySelector(".IBMChat-watson-message");if(e>4){var a=u("loading_failure1");t.chatID?c.publish("enable-input"):(a=u("loading_failure2"),c.publish("disable-input")),r.classList.add("IBMChat-hidden"),o.innerHTML=a,i.classList.remove("IBMChat-hidden"),c.publish("scroll-to-bottom"),l.set({sendQueue:[],inProgress:!1})}else 0!==e&&(i.classList.add("IBMChat-hidden"),n.classList.remove("IBMChat-hidden"),setTimeout(function(){c.publish("retry")},5e3))},0)}function s(t){c.publish("layout:error",t)}var c=n(/*! ../../events */1),l=n(/*! ../../state */2),u=n(/*! ../../utils/i18n */4),d={basic:function(){return u("basic_err")}};t.exports={httpError:o,retry:a,clearError:i,tryIt:s}},/*!**************************************!*\
  !*** ./src/events/handlers/index.js ***!
  \**************************************/
function(t,e,n){var r=n(/*! ./start */77),i=n(/*! ./resize */72),o=n(/*! ./receive */70),a=n(/*! ./send */76),s=n(/*! ./send-mock */75),c=n(/*! ./send-input-message */74),l=n(/*! ./input */69),u=n(/*! ./error */67),d=n(/*! ./scroll-to-bottom */73),h=n(/*! ./try-it */78),p=n(/*! ./clear */66),f=n(/*! ./reset */71),m=n(/*! ./chatid */65);t.exports={resize:i,start:r,clear:p,send:a,sendMock:s,receive:o,input:l,error:u,scrollToBottom:d,sendInputMessage:c,tryIt:h,chatID:m,reset:f}},/*!**************************************!*\
  !*** ./src/events/handlers/input.js ***!
  \**************************************/
function(t,e,n){function r(){var t=c.get();c.set({disableInput:!1}),t.input.removeAttribute("disabled")}function i(){var t=c.get();c.set({disableInput:!0}),t.input.setAttribute("disabled","disabled")}function o(t){var e,n;setTimeout(function(){e=c.get(),t=t||h("thinking"),n=e.root.querySelector(".IBMChat-loading-container"),n&&e.chatHolder.removeChild(n)},0),setTimeout(function(){e.chatHolder.innerHTML+=u.compile(d.loading,{retryAttempt:h("reconnect")})},0),setTimeout(function(){n=e.root.querySelector(".IBMChat-loading");var r=e.root.querySelector(".IBMChat-loading-message-text");n.classList.remove("IBMChat-hidden"),r.textContent=t,l.publish("resize")},0)}function a(){setTimeout(function(){var t=c.get(),e=t.root.querySelector(".IBMChat-loading-container");e&&t.chatHolder.removeChild(e),l.publish("resize")},0)}function s(){var t=c.get();t.input.focus()}var c=n(/*! ../../state */2),l=n(/*! ../../events */1),u=n(/*! ../../utils */3),d=n(/*! ../../templates */7),h=n(/*! ../../utils/i18n */4);t.exports={enableInput:r,disableInput:i,enableLoadingInput:o,disableLoadingInput:a,focusInput:s}},/*!****************************************!*\
  !*** ./src/events/handlers/receive.js ***!
  \****************************************/
function(t,e,n){function r(t,e,n){var r=t.message;if(r&&r.action&&r.action.name){var i="action:"+r.action.name;u.hasSubscription(i)?(u.publish(i,t,u.completeEvent),n&&console.log("Call to "+i)):(n&&console.warn("Nothing is subscribed to "+i),e&&u.publish("try-it-action-subscription",i))}u.publish("enable-input"),u.publish("disable-loading"),u.publish("scroll-to-bottom"),d.isVisible()&&u.publish("focus-input")}function i(t,e,n){var r=t.message;if(r&&r.layout&&r.layout.name){var i="layout:"+r.layout.name;u.hasSubscription(i)?setTimeout(function(){u.publish(i,t),n&&console.log("Call to "+i)},10):(n&&console.warn("Nothing is subscribed to "+i),e&&u.publish("try-it-layout-subscription",i))}}function o(t){var e=t.message,n=function(t){return!(!t||!t.log_data)&&(t.log_data.wva_top_intent&&"object"==typeof t.log_data.wva_top_intent&&t.log_data.wva_top_intent.intent?t.log_data.wva_top_intent.intent:!!(t.log_data.intents&&t.log_data.intents.length>0&&t.log_data.intents[0].intent)&&t.log_data.intents[0].intent)},r=n(e);e&&e.log_data&&e.log_data.show_intent_link===!0&&r&&u.publish("try-it-get-intent-data",{element:t.intentElement,intent:r})}function a(t){setTimeout(function(){s(t)},0)}function s(t){var e="string"==typeof t?{message:{text:t}}:t;e=c.parse(e);var n=l.get();l.set({messages:[].concat(n.messages||[],e),errorCount:0});var a=e.message,s=a&&a.text?Array.isArray(a.text)&&a.text.length>0?a.text:[a.text]:[""],u=[],f=[],m=[],v=[],g=[],b=document.createElement("div");b.classList.add("IBMChat-watson-turn"),n.chatHolder.appendChild(b);for(var y=0;y<s.length;y++){var _=document.createElement("div"),x=h({},e,{uuid:d.getUUID()});if(_.classList.add(x.uuid),_.innerHTML=p.receive,u.push(_.querySelector(".IBMChat-watson-message-container")),f.push(document.createElement("div")),m.push(document.createElement("div")),m[y].classList.add("IBMChat-watson-layout"),v.push(document.createElement("div")),v[y].classList.add("IBMChat-watson-intent"),s[y]&&s[y].length>0||a&&a.layout&&a.layout.name&&y===s.length-1){var C=document.createElement("div");C.classList.add("IBMChat-watson-message-line"),u[y].appendChild(C),f[y].classList.add("IBMChat-watson-message"),d.writeMessage(f[y],s[y])}b.appendChild(_),u[y].appendChild(f[y]),u[y].appendChild(v[y]),u[y].appendChild(m[y]),x.element=u[y],x.layoutElement=m[y],x.msgElement=f[y],x.intentElement=v[y],g.push(x),n.tryIt&&y===s.length-1&&o(g[y]),a&&a.layout&&(void 0!==a.layout.index&&a.layout.index==y||void 0===a.layout.index&&y==s.length-1)&&i(g[y],n.tryIt,n.DEBUG),y===s.length-1&&r(g[y],n.tryIt,n.DEBUG)}}var c=n(/*! @watson-virtual-agent/client-sdk/lib/web */5),l=n(/*! ../../state */2),u=n(/*! ../../events */1),d=n(/*! ../../utils */3),h=n(/*! lodash/assign */6),p=n(/*! ../../templates */7);t.exports=a},/*!**************************************!*\
  !*** ./src/events/handlers/reset.js ***!
  \**************************************/
function(t,e,n){function r(){return o.publish("clear-error"),o.publish("scroll-to-bottom"),new window.Promise(function(t,e){var n=i.get(),r=s.getSDKConfig(n);s.checkRoot(n.root)||e({error:"Element for chat does not exist!"}),n.botID||e({error:"BotID is required!"}),a.configure(r).start(n.botID).then(function(t){o.publish("clear"),o.publish("chatID",t.chatID),o.publish("receive",t)})["catch"](function(t){o.publish("httpError",t)}).then(function(){setTimeout(function(){t()},0)})})}var i=n(/*! ../../state */2),o=n(/*! ../../events */1),a=n(/*! @watson-virtual-agent/client-sdk/lib/web */5),s=n(/*! ../../utils */3);t.exports=r},/*!***************************************!*\
  !*** ./src/events/handlers/resize.js ***!
  \***************************************/
function(t,e,n){function r(t){return Math.floor(window.getComputedStyle(t).getPropertyValue("height").replace("px",""))}function i(){clearTimeout(a),a=setTimeout(function(){a=null,o()},150)}function o(){var t=s.get();if(t.isVisible&&t.active){var e=35,n={},i=0,o=0,a=0,u=0,d=t.root.clientHeight,h=t.root.clientWidth,p=d*(e/100),f=p>96?p:96,m=t.input?r(t.inputClone):null,v=t.input?r(t.input):0,g=t.input&&t.input.value&&t.input.value.length>0?t.input.value.replace(/\n/g,"<br />"):"Enter message...",b=t.input?t.inputClone.innerHTML:null,y=function(){return void 0===n.chatHolderHeight&&void 0===n.containerHeight||c.publish("scroll-to-bottom"),void 0!==n.rootWidth||void 0!==n.chatHolderHeight||void 0!==n.rootHeight||void 0!==n.isLarge||void 0!==n.containerHeight||void 0!==n.inputHeight};setTimeout(function(){t.rootHeight!==d&&(l&&console.log("New Root Height:",d),n.rootHeight=d),t.rootWidth!==h&&(l&&console.log("New Root Width:",h),n.rootWidth=h,t.chat.style.width=h+"px",n.rootWidth=h)},0),setTimeout(function(){t.input&&(b!==g&&(t.inputClone.textContent=g,m=r(t.inputClone)),t.inputHeight!==m&&(l&&console.log("Input height does not match:",t.inputHeight,v),v=f>m?m:f),t.inputHeight!==v&&(l&&console.log("New Input Height:",t.inputHeight,v),t.input.style.height=v+"px",n.inputHeight=v))},0),setTimeout(function(){t.input&&(u=r(t.inputContainer)),o=r(t.chatHolder),a=o,l&&console.log("chatHolderHeight",o,"rootHeight",d,"inputHolderHeight",u),i=Math.floor(d-u),o<i?(o="auto",a=i+"px"):(o=i+"px",a=o),t.containerHeight!==i&&(l&&console.log("New Container Height:",i),t.innerContainer.style.height=i+"px",n.containerHeight=i),t.chatHolderHeight===o&&t.chatHolderMaxHeight===a||(l&&(console.log("New Chat Holder Height: "+o),console.log("New Chat Holder Max Height: "+a)),n.chatHolderHeight=o,n.chatHolderMaxHeight=a,t.chatHolder.style.height=o,t.chatHolder.style.maxHeight=a),h>=480?(t.root.classList.add("IBMChat-isLarge"),t.isLarge||(n.isLarge=!0)):(t.root.classList.remove("IBMChat-isLarge"),t.isLarge&&(n.isLarge=!1)),y()&&s.set(n)},0)}}var a,s=n(/*! ../../state */2),c=n(/*! ../../events */1),l=!1;t.exports=i},/*!*************************************************!*\
  !*** ./src/events/handlers/scroll-to-bottom.js ***!
  \*************************************************/
function(t,e,n){function r(){setTimeout(function(){var t=300,e=Date.now(),n=e+t,r=i.get(),a=r.chatHolder.scrollTop,s=a,c=r.chatHolder.scrollHeight-a,l=setInterval(function(){var t=Date.now();if(r.chatHolder.scrollTop!=s)return void clearInterval(l);if(t>=n)return clearInterval(l),void(r.chatHolder.scrollTop=r.chatHolder.scrollHeight);if(r.chatHolder.scrollTop==r.chatHolder.scrollHeight)return void clearInterval(l);var i=o(e,n,t),u=Math.round(a+c*i);r.chatHolder.scrollTop=u,s=r.chatHolder.scrollTop},0)},100)}var i=n(/*! ../../state */2),o=function(t,e,n){if(n<=t)return 0;if(n>=e)return 1;var r=(n-t)/(e-t);return r*r*(3-2*r)};t.exports=r},/*!***************************************************!*\
  !*** ./src/events/handlers/send-input-message.js ***!
  \***************************************************/
function(t,e,n){function r(){var t=i.get();if(!t.inProgress&&!t.disableInput){var e=t.root.querySelector(".IBMChat-chat-textbox").value.trim().replace(/(\r\n|\n|\r)/gm,"");o.publish("send",{text:e}),e=""}}var i=n(/*! ../../state */2),o=n(/*! ../../events */1);t.exports=r},/*!******************************************!*\
  !*** ./src/events/handlers/send-mock.js ***!
  \******************************************/
function(t,e,n){function r(t){setTimeout(function(){i(t)},0)}function i(t){if(t.text&&t.text.length>0){var e=o.get(),n=c({},t,{uuid:s.getUUID()});e.chatHolder.innerHTML+=s.compile(l.send,{"data.uuid":n.uuid}),e.chatHolder.querySelector("#"+n.uuid+" .IBMChat-user-message").textContent=t.text,a.publish("resize"),a.publish("scroll-to-bottom")}}var o=n(/*! ../../state */2),a=n(/*! ../../events */1),s=n(/*! ../../utils */3),c=n(/*! lodash/assign */6),l=n(/*! ../../templates */7);t.exports=r},/*!*************************************!*\
  !*** ./src/events/handlers/send.js ***!
  \*************************************/
function(t,e,n){function r(t){setTimeout(function(){i(t)},0)}function i(t){if(t&&t.text&&t.text.length>0){var e=d.get();o(t),e.inProgress||l()}}function o(t){var e=d.get(),n=e.sendQueue||[],r=n.slice(0);r.push(t),d.set({sendQueue:r})}function a(t,e){var n=d.get();d.set({errorCount:0,sendQueue:n.sendQueue.slice(1,n.sendQueue.length),messages:[].concat(n.messages||[],t),inProgress:!1}),h.publish("receive",e),h.publish("error-clear"),h.publish("disable-loading"),h.publish("scroll-to-bottom"),d.get().sendQueue.length>0&&l()}function s(){h.publish("httpError",arguments)}function c(t,e){function n(t){var e=Date.now(),n=e-i,r=1e3*o,a=r-n;a>0?setTimeout(function(){t()},a):t()}var r=d.get(),i=Date.now(),o=r.minSeconds;e||h.publish("enable-loading"),h.publish("focus-input"),p.send(r.botID,r.chatID,t.text,r.context).then(function(e){n(function(){a(t,e)})})["catch"](function(t){n(function(){s(t)})})}function l(t){var e=d.get(),n=m({},e.sendQueue[0],{uuid:f.getUUID()}),r=n.text||"";d.set({inProgress:!0}),e.root.querySelector(".IBMChat-chat-textbox").value="",n.silent||t||(e.chatHolder.innerHTML+=f.compile(v.send,{"data.uuid":n.uuid}),e.chatHolder.querySelector("#"+n.uuid+" .IBMChat-user-message").textContent=r,h.publish("scroll-to-bottom")),e.handleInput["default"]?c(n,t):e.handleInput.context?e.handleInput.callback.bind(e.handleInput.context,n.text,a,s):e.handleInput.callback(n.text,a,s)}function u(){var t=d.get();t.sendQueue&&t.sendQueue.length>0?l(!0):h.publish("reset")}var d=n(/*! ../../state */2),h=n(/*! ../../events */1),p=n(/*! @watson-virtual-agent/client-sdk/lib/web */5),f=n(/*! ../../utils */3),m=n(/*! lodash/assign */6),v=n(/*! ../../templates */7);t.exports={send:r,retry:u}},/*!**************************************!*\
  !*** ./src/events/handlers/start.js ***!
  \**************************************/
function(t,e,n){function r(t){var e;i.set(t),e=i.get(),a.attachStyles(),e.root.classList.add(e.chatStyleID),e.root.innerHTML=c.start;var n={chat:e.root.querySelector(".IBMChat"),outerContainer:e.root.querySelector(".IBMChat-outer-container"),container:e.root.querySelector(".IBMChat-chat-container"),chatHolder:e.root.querySelector(".IBMChat-messages"),innerContainer:e.root.querySelector(".IBMChat-inner-container")};if(e.playback!==!0){var r=document.createElement("div");r.classList.add("IBMChat-input-container"),r.classList.add("IBMChat-input-container-theme"),r.innerHTML=o.compile(c.input,{placeholder:l("prompt")}),n.outerContainer.appendChild(r),n.inputHolder=e.root.querySelector(".IBMChat-input-container form"),n.inputContainer=e.root.querySelector(".IBMChat-chat-text-container"),n.input=e.root.querySelector(".IBMChat-chat-textbox"),n.inputClone=e.root.querySelector(".IBMChat-chat-textbox-clone"),n.form=e.root.querySelector(".IBMChat-input-form"),n.form.addEventListener("submit",function(t){t.preventDefault()}),n.onResize=function(){s.publish("resize")},e.tryIt&&n.chatHolder.addEventListener("click",function(t){if(t.target.dataset){var e=t.target.dataset;if(e.intent){var n=e.intent,r=i.get();t.preventDefault(),r.intents&&r.intents[n]?s.publish("try-it-show-intent",r.intents[n]):console.error("Intent index is undefined",r.intents,n)}else e["private"]&&s.publish("try-it-show-private",e["private"])}}),n.chatHolder.addEventListener("click",function(t){t.target.dataset&&t.target.dataset.retry&&(s.publish("error-clear"),setTimeout(function(){s.publish("enable-loading"),s.publish("reset")},0))}),n.input.addEventListener("keydown",function(t){var e=i.get();13===t.keyCode&&(t.preventDefault(),e.inProgress||(s.publish("send-input-message"),n.inputClone.innerHTML="",n.input.style.overflow="hidden",n.input.style.height=n.originalInputHeight+"px",i.set({inputHeight:n.originalInputHeight}))),s.publish("resize")}),n.input.addEventListener("focus",function(){s.publish("resize")}),n.input.addEventListener("blur",function(){s.publish("resize")})}window.addEventListener("resize",function(){s.publish("resize")}),window.addEventListener("orientationchange",function(){s.publish("resize")}),i.setState(n),o.checkVisibility(),o.addResizeListener(e.root,n.onResize),s.publish("resize")}var i=n(/*! ../../state */2),o=n(/*! ../../utils */3),a=n(/*! ../../styles */10),s=n(/*! ../../events */1),c=n(/*! ../../templates */7),l=n(/*! ../../utils/i18n */4);t.exports=r},/*!***************************************!*\
  !*** ./src/events/handlers/try-it.js ***!
  \***************************************/
function(t,e,n){function r(t){var e=c.get(),n=e.intents||[],r=n.slice(0),i=r.push(t);return c.set({intents:r}),i-1}function i(t){s.publish("receive",{message:{layout:{name:"error",message:"A subscription was called to "+t+". Nothing is subscribed to this action in the Try-It interface. This is probably due to you using a custom workspace. On your own site, you should have code to handle this action."}}})}function o(t){s.publish("receive",{message:{layout:{name:"error",message:"A subscription was called to "+t+". Nothing is subscribed to this layout in the Try-It interface. This is probably due to you using a custom workspace. On your own site, you should have code to handle this layout."}}})}function a(t){var e=t.element,n=document.createElement("a");n.setAttribute("href","javascript:void(0)"),t["private"]?(n.textContent="#"+t.intent,n.setAttribute("data-private",t.intent)):(n.textContent=t.blueprint.label,n.setAttribute("data-intent",r(t))),e.appendChild(n)}var s=n(/*! ../../events */1),c=n(/*! ../../state */2);t.exports={actionError:i,layoutError:o,intent:a}},/*!*******************************************!*\
  !*** ./src/layouts/cc-validator/index.js ***!
  \*******************************************/
function(t,e,n){function r(t){this.init(t)}var i=n(/*! ../../events */1),o=n(/*! ../../profile */9),a=i.subscribe,s=i.publish,c=n(/*! ../../utils */3),l=n(/*! ./validation */80),u="IBMChat-accent-colors",d="IBMChat-accent-colors-button",h="IBMChat-creditcard",p=[],f={base:n(/*! ./templates/base.html */43)},m=n(/*! ../../utils/i18n */4),v={init:function(){a("layout:cc-validator",function(t){var e=new r(t);p[t.uuid]=e})}};r.prototype.init=function(t){this.acceptedCards=t.message.data,this.uuid=t.uuid,this.parentElement=t.element,this.layoutElement=t.layoutElement,this.msgElement=t.msgElement,this.formData={},this.drawForm(),this.subscribeSend=a("send",this.removeAllEventListeners.bind(this)),s("disable-input")},r.prototype.drawForm=function(){var t=f.base;this.el=document.createElement("div"),t=c.compile(f.base,{ns:h,uuid:c.getUUID(),cc_name:m("cc_name"),cc_num:m("cc_num"),cc_exp_mon:m("cc_exp_mon"),cc_exp_year:m("cc_exp_year"),cc_code:m("cc_code"),placeholder_mon:m("placeholder_mon"),placeholder_year:m("placeholder_year"),cancel:m("cancel"),submit:m("submit")}),this.el.innerHTML=t,this.layoutElement.appendChild(this.el),this.cancelButton=this.el.querySelector("."+h+"-cancel"),this.submitButton=this.el.querySelector("."+h+"-submit"),this.cancelButton.classList.add(d),this.submitButton.classList.add(d),this.formElements={},this.fields=this.el.querySelectorAll("input");for(var e=0;e<this.fields.length;e++){var n=this.fields[e],r=n.getAttribute("name");this.formElements[r]=n}this.formElements.cc_full_name.focus(),this.addListeners()},r.prototype.addError=function(t,e){var n,r;"cc_exp_date"===t?(n=this.formElements.cc_exp_date_month,n.setAttribute("aria-invalid",!0),n.dataset.valid=!1,n=this.formElements.cc_exp_date_year,n.setAttribute("aria-invalid",!0),n.dataset.valid=!1):(n=this.formElements[t],n.setAttribute("aria-invalid",!0),n.dataset.valid=!1),r=this.el.querySelector('[data-validation-for="'+t+'"]'),r.style.display="block",r.dataset.valid=!1,r.textContent=e},r.prototype.removeError=function(t){var e,n;"cc_exp_date"===t?(e=this.formElements.cc_exp_date_month,e.removeAttribute("aria-invalid"),e.dataset.valid=!0,e=this.formElements.cc_exp_date_year,e.removeAttribute("aria-invalid"),e.dataset.valid=!0):(e=this.formElements[t],e.removeAttribute("aria-invalid"),e.dataset.valid=!0),n=this.el.querySelector('[data-validation-for="'+t+'"]'),n.style.display="none",n.dataset.valid=!0,n.textContent=""},r.prototype.validate_cc_full_name=function(t){return 0===this.formData.cc_full_name.trim().length?(this.addError("cc_full_name",m("required_field")),t&&this.formElements.cc_full_name.focus(),t=!1):this.removeError("cc_full_name"),t},r.prototype.validate_cc_number=function(t){var e=l.validateCard(this.acceptedCards,this.formData.cc_number,this.formElements.cc_number);return e.valid?this.removeError("cc_number"):(this.addError("cc_number",e.message),t&&this.formElements.cc_number.focus(),t=!1),t},r.prototype.validate_cc_exp_date=function(t){var e=l.validateExp(this.formData.cc_exp_date_month,this.formData.cc_exp_date_year);return e.valid?this.removeError("cc_exp_date"):(this.addError("cc_exp_date",e.message),t&&this.formElements.cc_exp_date_month.focus(),t=!1),t},r.prototype.validate_cc_code=function(t){var e=l.validateCVV(this.formData.cc_code);return e.valid?this.removeError("cc_code"):(this.addError("cc_code",e.message),t&&this.formElements.cc_code.focus(),t=!1),t},r.prototype.validate=function(){var t=!0;return t=this.validate_cc_full_name(t),t=this.validate_cc_number(t),t=this.validate_cc_exp_date(t),t=this.validate_cc_code(t)},r.prototype.preprocessFormData=function(){this.formData={};for(var t=0;t<this.fields.length;t++){var e=this.fields[t],n=e.getAttribute("name");"cc_exp_date_month"===n&&/^[1-9]$/.test(e.value)&&(e.value="0"+e.value),this.formData[n]=e.value}},r.prototype.handleKeyup=function(t){var e=t.target,n={cc_full_name:this.validate_cc_full_name,cc_number:this.validate_cc_number,cc_exp_date_month:this.validate_cc_exp_date,cc_exp_date_year:this.validate_cc_exp_date,cc_code:this.validate_cc_code},r=e.getAttribute("name");13===t.keyCode?(t.preventDefault(),this.handleSubmit()):"false"==e.dataset.valid&&"function"==typeof n[r]&&(this.formData[r]=e.value,n[r].call(this,!1))},r.prototype.handleSubmit=function(){if(this.preprocessFormData(),this.validate()){var t=this.formData;t.cc_exp_date=t.cc_exp_date_month+"/"+t.cc_exp_date_year,t.cc_last_four_digits=t.cc_number.substr(t.cc_number.length-4),Object.keys(t).map(function(e){o.set(e,t[e])}),this.submitButton.classList.remove(d),this.submitButton.classList.add(u),s("enable-input"),s("send",{silent:!0,text:"success"})}},r.prototype.handleCancel=function(){this.cancelButton.classList.remove(d),this.cancelButton.classList.add(u),s("enable-input"),s("send",{silent:!0,text:"cancel"})},r.prototype.addListeners=function(){this.cancelButton.addEventListener("click",this.handleCancel.bind(this)),this.submitButton.addEventListener("click",this.handleSubmit.bind(this));for(var t=0;t<this.fields.length;t++)this.fields[t].addEventListener("keyup",this.handleKeyup.bind(this))},r.prototype.removeAllEventListeners=function(){this.cancelButton.removeEventListener("click",this.handleCancel.bind(this)),this.cancelButton.setAttribute("disabled",!0),this.submitButton.removeEventListener("click",this.handleSubmit.bind(this)),this.submitButton.setAttribute("disabled",!0);for(var t=0;t<this.fields.length;t++){var e=this.fields[t];e.removeEventListener("keyup",this.handleKeyup.bind(this)),e.setAttribute("disabled",!0)}this.subscribeSend.remove()},t.exports=v},/*!************************************************!*\
  !*** ./src/layouts/cc-validator/validation.js ***!
  \************************************************/
function(t,e,n){function r(){if(0===h.acceptedCards.length)return!0;for(var t=0;t<h.acceptedCards.length;t++)for(var e=f[h.acceptedCards[t]],n=0;n<e.prefixes.length;n++){var r=e.prefixes[n].toString();if(h.cardNumber.substring(0,r.length)===r)return h.cardType=h.acceptedCards[t],!0}return!1}function i(){for(var t,e=0,n=1,r=h.cardNumber.length-1;r>=0;r--)t=Number(h.cardNumber.charAt(r))*n,t>9&&(e+=1,t-=10),e+=t,n=1==n?2:1;return e%10==0}function o(t){return{message:t,valid:!1}}function a(){return{valid:!0}}function s(t,e,n){if(h.acceptedCards=t||[],h.cardNumber=e.replace(/\D/g,""),0===e.length)return o(p.required());if(0===h.cardNumber.length)return o(p.invalid());if(!r())return o(h.acceptedCards.indexOf(h.cardType)===-1?p.acceptedCard():p.invalid());if(f[h.cardType].lengths.indexOf(h.cardNumber.length)===-1)return o(p.invalid());if(i()===!1)return o(p.invalid());var s=a();return s&&h.cardNumber!==e&&n&&(n.value=h.cardNumber),s}function c(t,e){var n=/^(0[1-9]|1[012])$/,r=/^(20)[0-9][0-9]$/,i=new Date,s=i.getMonth()+1,c=i.getFullYear();if(0===t.length||0===e.length)return o(p.invalidExpiration());var l=!t.match(n)||!e.match(r);t=parseInt(t,10),e=parseInt(e,10);var u=e>c+20||e<c,d=e===c&&t<s;return l||u||d?o(p.invalidExpiration()):a()}function l(t){var e=/^[0-9]{3,4}$/;return 0===t.length?o(p.invalidCvv()):t.match(e)?a():o(p.invalidCvv())}var u,d=n(/*! ../../utils/i18n */4),h={acceptedCards:[],cardNumber:"",cardType:""},p={required:function(){return d("required_field")},acceptedCard:function(){var t=d("cc_use_valid");return t+=h.acceptedCards.map(function(t){return f[t].human}).join(d("list_sep"))},invalid:function(){return d("cc_invalid")},invalidExpiration:function(){return d("cc_invalid_exp")},invalidCvv:function(){return d("cc_invalid_code")}},f={visa:{human:"Visa",prefixes:[4],lengths:[13,16,19]},mastercard:{human:"MasterCard",prefixes:[51,52,53,54,55],lengths:[16]},amex:{human:"American Express",prefixes:[34,37],lengths:[15]},discover:{human:"Discover",prefixes:[6011,65],lengths:[16,19]}};for(u=2221;u<=2720;u++)f.mastercard.prefixes.push(u);for(u=622126;u<=622925;u++)f.discover.prefixes.push(u);for(u=644;u<=649;u++)f.discover.prefixes.push(u);t.exports={validateCard:s,validateExp:c,validateCVV:l,cardData:f}},/*!***************************************************!*\
  !*** ./src/layouts/choose-location-type/index.js ***!
  \***************************************************/
function(t,e,n){function r(t){this.init(t)}var i=n(/*! ../../events */1),o=i.subscribe,a=i.publish,s="IBMChat-accent-colors",c="IBMChat-accent-colors-button",l=n(/*! ../../utils */3),u=n(/*! ../../utils/i18n */4),d="IBMChat-islocationapi",h=[],p={init:function(){o("layout:choose-location-type",function(t){var e=new r(t);h[t.uuid]=e})}},f={postalcode:"zipcode",geolocation:"latlong"},m={base:n(/*! ./templates/base.html */44)};r.prototype={init:function(t){if(this.data=t.data,this.uuid=t.uuid,"navigator"in window&&"geolocation"in navigator){this.eventListeners=[],this.parentElement=t.element,this.layoutElement=t.layoutElement,this.el=document.createElement("div"),this.el.innerHTML=l.compile(m.base,{ns:d,"values.geolocation":f.geolocation,"values.postalcode":f.postalcode,loc_curr:u("loc_curr"),postal_code:u("postal_code")}),this.layoutElement.appendChild(this.el),this.buttons=this.layoutElement.querySelectorAll("button"),this.buttons[0].focus();for(var e=0;e<this.buttons.length;e++)this.buttons[e].dataset.uuid=this.uuid,this.buttons[e].addEventListener("click",this.handleClick),this.eventListeners.push(this.buttons[e]);this.eventListeners.length>0&&(this.subscribeSend=o("send",this.removeAllEventListeners.bind(this)))}else a("send",{text:f.postalcode,silent:!0})},handleClick:function(){var t={silent:!0,text:null};t.text=this.dataset.input,this.classList.add(s),this.classList.remove(c),a("send",t),a("focus-input")},removeAllEventListeners:function(){if(this.eventListeners.length>0){for(var t=0;t<this.eventListeners.length;t++)this.eventListeners[t].removeEventListener("click",this.handleClick),this.eventListeners[t].setAttribute("disabled",!0);this.eventListeners=[]}this.subscribeSend.remove()}},t.exports=p},/*!*************************************!*\
  !*** ./src/layouts/choose/index.js ***!
  \*************************************/
function(t,e,n){function r(t){this.init(t)}var i=n(/*! ../../events */1),o=i.subscribe,a=i.publish,s=n(/*! ../../utils */3),c="IBMChat-choose",l="IBMChat-accent-colors",u="IBMChat-accent-colors-button",d=[],h={button:n(/*! ./templates/button.html */45),submit:n(/*! ./templates/submit.html */46)},p={init:function(){o("layout:choose",function(t){var e=new r(t);d[t.uuid]=e}),o("layout:confirm",function(t){var e=new r(t);d[t.uuid]=e})}};r.prototype.init=function(t){this.allowMultiple=void 0!==t.message.inputvalidation.someOf,this.values=[],this.data=this.allowMultiple?t.message.inputvalidation.someOf:t.message.inputvalidation.oneOf,this.uuid=t.uuid,this.parentElement=t.element,this.layoutElement=t.layoutElement,this.msgElement=t.msgElement,this.drawButtons(),this.subscribeSend=o("send",this.removeAllEventListeners.bind(this))},r.prototype.eventListeners=[],r.prototype.drawButtons=function(){var t=h.button;this.el=document.createElement("div"),this.el.classList.add(c+"-container");for(var e=0;e<this.data.length;e++){var n=this.data[e],r=document.createElement("div");r.classList.add(c+"-option");var i,o=s.compile(t,{text:n});r.innerHTML=o,this.el.appendChild(r),i=r.querySelector("button"),i.setAttribute("data-uuid",this.uuid),i.classList.add(u),this.addListener(i)}if(this.allowMultiple){var a=document.createElement("div"),d=s.compile(h.submit,{text:"Submit"});a.classList.add(c+"-submit"),a.innerHTML=d,this.submitButton=a.querySelector("button"),this.submitButton.classList.add(l),this.submitButton.setAttribute("disabled",!0),this.el.appendChild(a),this.addSubmitListener(this.submitButton)}this.layoutElement.appendChild(this.el),this.layoutElement.querySelectorAll("button")[0].focus()},r.prototype.handleClick=function(){var t={silent:!0,text:null};t.text=this.dataset.input,this.classList.add(l),this.classList.add("IBMChat-accent-colors"),a("send",t)},r.prototype.handleMultiClick=function(){var t,e=d[this.dataset.uuid];s.hasClass(this,l)?(this.classList.add(u),this.classList.remove(l)):(this.classList.add(l),this.classList.remove(u)),t=e.el.querySelectorAll("."+c+"-option ."+l),t.length>0?e.submitButton.removeAttribute("disabled"):e.submitButton.setAttribute("disabled",!0)},r.prototype.handleSubmit=function(){for(var t=this.el.querySelectorAll("."+l),e=0;e<t.length;e++)this.values.push(t[e].dataset.input);a("send",{silent:!0,text:this.values.toString().slice(0,-1)})},r.prototype.addListener=function(t){this.allowMultiple?t.addEventListener("click",this.handleMultiClick):t.addEventListener("click",this.handleClick),this.eventListeners.push({el:t,cb:this.allowMultiple?this.handleMultiClick:this.handleClick})},r.prototype.addSubmitListener=function(t){t.addEventListener("click",this.handleSubmit.bind(this)),this.eventListeners.push({el:t,cb:this.handleSubmit.bind(this)})},r.prototype.removeAllEventListeners=function(){if(this.eventListeners.length>0){for(var t=0;t<this.eventListeners.length;t++)this.eventListeners[t].el.removeEventListener("click",this.eventListeners[t].cb),this.eventListeners[t].el.setAttribute("disabled",!0);this.eventListeners=[],this.subscribeSend.remove()}},t.exports=p},/*!************************************!*\
  !*** ./src/layouts/error/index.js ***!
  \************************************/
function(t,e,n){function r(t){this.init(t)}var i=n(/*! ../../events */1),o=[],a="IBMChat-error",s={init:function(){i.subscribe("layout:error",function(t){var e=new r(t);o[t.uuid]=e})}},c={base:n(/*! ./templates/base.html */47)};r.prototype.init=function(t){this.message=t.message.layout.message,this.uuid=t.uuid,this.parentElement=t.element,this.layoutElement=t.layoutElement,this.layoutElement.innerHTML=c.base,this.layoutElement.querySelector("."+a).textContent=this.message},t.exports=s},/*!***********************************!*\
  !*** ./src/layouts/form/index.js ***!
  \***********************************/
function(t,e,n){function r(t){this.init(t)}var i=n(/*! ../../events */1),o=n(/*! ../../profile */9),a=n(/*! ../../utils */3),s=n(/*! ../../utils/i18n */4),c=i.subscribe,l=i.publish,u="IBMChat-form",d="IBMChat-accent-colors",h="IBMChat-accent-colors-button",p={base:n(/*! ./templates/base.html */48),field:n(/*! ./templates/field.html */49)},f=[],m={init:function(){c("layout:form",function(t){var e=new r(t);f[t.uuid]=e})}};r.prototype.init=function(t){this.data=t.message.store||[],this.action=t.message.action||"",this.label=t.message.layout.label||{},this.uuid=t.uuid,this.parentElement=t.element,this.layoutElement=t.layoutElement,this.msgElement=t.msgElement,this.drawForm(),this.subscribeSend=c("send",this.removeEventListeners.bind(this)),l("disable-input")},r.prototype.drawForm=function(){var t,e=document.createElement("div");e.innerHTML=a.compile(p.base,{submit:this.label.submit||s("submit"),cancel:this.label.cancel||s("cancel")}),t=e.querySelector(".IBMChat-form-fields"),this.data.forEach(function(e,n){var r=document.createElement("div");r.innerHTML=a.compile(p.field,{label:e.label||"",name:e.name,uuid:a.getUUID(),type:e.type||"text",index:n,value:""}),r.className=u+"-fields-row",t.appendChild(r)}),this.fields=t.querySelectorAll("input"),this.submitButton=e.querySelector("."+u+"-submit"),this.cancelButton=e.querySelector("."+u+"-cancel"),this.submitButton.classList.add(h),this.cancelButton.classList.add(h),this.layoutElement.appendChild(e),this.fields[0].focus(),this.addEventListeners()},r.prototype.handleSubmit=function(){if(this.validateFields()===!0){for(var t=0;t<this.fields.length;t++)o.set(this.fields[t].getAttribute("name"),this.fields[t].value||new String(""));this.submitButton.classList.remove(h),this.submitButton.classList.add(d),l("send",{silent:!0,text:"success"}),l("enable-input")}else this.setFocusOnError()},r.prototype.setFocusOnError=function(){for(var t=0;t<this.fields.length;t++){var e=this.fields[t].getAttribute("name"),n=this.layoutElement.querySelector('[data-validation-for="'+e+'"]');if("false"===n.dataset.valid){this.fields[t].focus();break}}},r.prototype.validateFields=function(){for(var t=!0,e=0;e<this.data.length;e++){var n=this.validateField(this.fields[e],this.data[e]);t=t&&n}return t},r.prototype.validateField=function(t,e){var n=!0;if(t.value&&0!==t.value.trim().length||"true"!=e.required||(this.addError(t.getAttribute("name"),s("required_field")),n=!1),n===!0&&e.validations&&0!==e.validations.length)for(var r=0;r<e.validations.length;r++){var i=e.validations[r],o=i.regex,a=new RegExp(o),c=a.test(t.value);if(!c){this.addError(t.getAttribute("name"),i.message),n=!1;break}}return n},r.prototype.addError=function(t,e){var n=this.layoutElement.querySelector('[name="'+t+'"]');n.dataset.valid=!1;var r=this.layoutElement.querySelector('[data-validation-for="'+t+'"]');n.setAttribute("aria-invalid",!0),r.dataset.valid=!1,r.textContent=e,r.style.display="block"},r.prototype.removeError=function(t){var e=this.layoutElement.querySelector('[name="'+t+'"]');e.dataset.valid=!0;var n=this.layoutElement.querySelector('[data-validation-for="'+t+'"]');e.removeAttribute("aria-invalid"),n.dataset.valid=!0,n.textContent="",n.style.display="none"},r.prototype.removeAllErrors=function(){for(var t=this.layoutElement.querySelectorAll("[data-validation-for]"),e=0;e<t.length;e++)this.removeError(t[e].attr("data-validation-for"))},r.prototype.handleKeyup=function(t){var e=t.target.dataset.index;if(13===t.keyCode)t.preventDefault(),this.handleSubmit();else if("false"===t.target.dataset.valid){var n=this.validateField(this.fields[e],this.data[e]);n&&this.removeError(t.target.getAttribute("name"))}},r.prototype.handleCancel=function(){this.cancelButton.classList.remove(h),this.cancelButton.classList.add(d),l("enable-input"),l("send",{silent:!0,text:"cancel"})},r.prototype.addEventListeners=function(){this.cancelButton.addEventListener("click",this.handleCancel.bind(this)),this.submitButton.addEventListener("click",this.handleSubmit.bind(this));for(var t=0;t<this.fields.length;t++){var e=this.fields[t];e.addEventListener("keyup",this.handleKeyup.bind(this))}},r.prototype.removeEventListeners=function(){this.cancelButton.removeEventListener("click",this.handleCancel.bind(this)),this.cancelButton.setAttribute("disabled",!0),this.submitButton.removeEventListener("click",this.handleSubmit.bind(this)),this.submitButton.setAttribute("disabled",!0);for(var t=0;t<this.fields.length;t++){var e=this.fields[t];e.removeEventListener("keyup",this.handleKeyup.bind(this)),e.setAttribute("disabled",!0)}this.subscribeSend.remove()},t.exports=m},/*!******************************!*\
  !*** ./src/layouts/index.js ***!
  \******************************/
function(t,e,n){var r=n(/*! ./show-locations */88),i=n(/*! ./request-geolocation-latlong */86),o=n(/*! ./request-geolocation-zipcode */87),a=n(/*! ./choose-location-type */81),s=n(/*! ./choose */82),c=n(/*! ./form */84),l=n(/*! ./cc-validator */79),u=n(/*! ./error */83);t.exports={showLocations:r,requestGeolocationLatlong:i,requestGeolocationZipcode:o,chooseLocationType:a,choose:s,creditCard:l,form:c,error:u}},/*!**********************************************************!*\
  !*** ./src/layouts/request-geolocation-latlong/index.js ***!
  \**********************************************************/
function(t,e,n){function r(t){this.init(t)}var i=n(/*! ../../events */1),o=n(/*! ../../utils/i18n */4),a=i.subscribe,s=i.publish,c=[],l=3e4,u={init:function(){a("layout:request-geolocation-latlong",function(t){var e=new r(t);c[t.uuid]=e})}};r.prototype={init:function(t){this.data=t.data,this.uuid=t.uuid,this.parentElement=t.element,this.layoutElement=t.layoutElement,this.msgElement=t.msgElement,this.timedOut=!1,this.timeoutCheck=setTimeout(function(){this.timedOut=!0,this.handleLocationNotShared()}.bind(this),l),s("enable-loading"),s("disable-input");try{navigator.permissions.query({name:"geolocation"}).then(function(e){"prompt"===e.state?(t.msgElement.textContent=o("loc_prompt"),s("enable-loading",o("loc_share"))):"granted"===e.state?(t.msgElement.textContent=o("loc_share_granted"),s("enable-loading",o("loc_looking"))):"denied"===e.state&&(t.msgElement.textContent=o("loc_share_denied"))})}catch(e){console.log("navigator.permissions not supported.")}navigator.geolocation.getCurrentPosition(function(t){return!this.timedOut&&(clearTimeout(this.timeoutCheck),void this.handleLocationShared(t))}.bind(this),function(){return!this.timedOut&&(clearTimeout(this.timeoutCheck),void this.handleLocationNotShared())}.bind(this))},handleLocationShared:function(t){s("enable-input"),s("disable-loading"),s("send",{text:t.coords.latitude+","+t.coords.longitude,silent:!0})},handleLocationNotShared:function(){var t=o("loc_not_shared_prompt");s("enable-input"),s("disable-loading"),s("receive",t),s("send",{text:"find nearest locations",silent:!0})}},t.exports=u},/*!**********************************************************!*\
  !*** ./src/layouts/request-geolocation-zipcode/index.js ***!
  \**********************************************************/
function(t,e,n){var r=n(/*! ../../events */1),i=r.subscribe,o={init:function(){i("layout:request-geolocation-zipcode",function(){})}};t.exports=o},/*!*********************************************!*\
  !*** ./src/layouts/show-locations/index.js ***!
  \*********************************************/
function(t,e,n){function r(t){for(var e=0;e<I.length;e++)if(e===I.length-1||I[e]>=t)return void(E=e)}function i(){var t=b.get(),e=t.chatHolder.querySelector("div:first-child");return e?e.clientWidth:0}function o(){return I[E]>=i()}function a(){if(M.length>0&&!o())for(var t=i(),e=0;e<I.length;e++)if(e===I.length-1||0===e&&t>=I[e]){E=e;for(var n=0;n<M.length;n++)B[M[n]].data.length>0&&B[M[n]].reDrawMap();return}}function s(t,e){var n=document.createElement("a");if(n.setAttribute("href","mailto:"+e.email),n.setAttribute("target","_blank"),n.textContent=e.email,e.phones&&e.phones.length>0){var r=document.createElement("div"),i=k.createDomArray;r.className=S+"-contact-row",r.innerHTML=y.compile(i,{ns:S});var o=r.querySelector("."+S+"-contact-type"),a=r.querySelector("."+S+"-contact-data");o.textContent="Email",a.appendChild(n),t.appendChild(r)}else t.appendChild(n)}function c(t,e){if(e)for(var n=0;n<e.length;n++){var r=document.createElement("div"),i=k.createDomArray;r.className=S+"-contact-row",r.innerHTML=y.compile(i,{ns:S});var o=r.querySelector("."+S+"-contact-type"),a=r.querySelector("."+S+"-contact-data");o.textContent=e[n].type,a.textContent=e[n].number,t.appendChild(r)}}function l(t,e,n,r,i){if(n){var o=new Date,a=o.toDateString(),s=o.getDay(),c=n[s],l=document.createElement("div");if(c&&c.isOpen){var d=new Date(a+" "+c.open),h=new Date(a+" "+c.close);d&&h?l.innerHTML=x.format("loc_open_today_more",{ns:S,open:d,close:h}):l.innerHTML=y.compile(k.hoursTodayUnknown,{ns:S,loc_open_today:x("loc_open_today")})}else l.innerHTML=y.compile(k.hoursTodayClosed,{ns:S,loc_closed_today:x("loc_closed_today")});if(y.appendToEach(t,l),r){var p=document.createElement("div");p.innerHTML=y.compile(k.hoursTimezone,{ns:S,timezone:r}),y.appendToEach(i,p)}else for(var f=0;f<i.length;f++)i[f].parentNode.removeChild(i[f]);for(var m=u(n),v=0;v<m.length;v++){var g=document.createElement("span");g.setAttribute("class",S+"-days-hours");var b=m[v];if(b&&b.isOpen){var _=b.startDay,C=b.endDay;if(_&&C){var w=_.getDate()===C.getDate()?"loc_hours_open":"loc_hours_open_multiday";g.innerHTML=x.format(w,{ns:S,openDay:_,closeDay:C,open:b.open,close:b.close})}else g.innerHTML=x.format("loc_hours_unknown",{ns:S,day:_})}else g.innerHTML=x.format("loc_hours_closed",{ns:S,day:b.startDay});v<m.length-1&&(g.querySelector("."+S+"-days-hours-hours").innerHTML+="<br />"),y.appendToEach(e,g)}}}function u(t){for(var e=[],n={},r=0;r<t.length;r++){var i,o,a=e.length>0&&e[e.length-1];n=t[r]||{isOpen:!1},i=a&&a.isOpen===n.isOpen&&n.isOpen===!1,o=a&&a.open===n.open&&a.close===n.close&&a.isOpen===n.isOpen,e.length>0&&a&&(i||o)?a.endDay=r:e.push({isOpen:n.isOpen,startDay:r,endDay:r,open:n.open,close:n.close})}var s=new Date;for(s.setHours(12),r=0;r<e.length;r++)n=e[r],n.startDay=d(s,n.startDay),n.isOpen&&(n.endDay=d(s,n.endDay),n.open=h(n.startDay,n.open),n.close=h(n.startDay,n.close));return e}function d(t,e){var n=t.getDay()-e,r=new Date(t);return r.setDate(r.getDate()-n),r}function h(t,e){return new Date(t.toDateString()+" "+e)}function p(t){if(t.distance){var e=0===t.distance.toFixed(1)?.1:t.distance.toFixed(1),n="miles"===t.distanceMeasure?"dist_miles":"dist_km";return x.format(n,{distance:e})}}function f(t){this.init(t)}var m=n(/*! ../../events */1),v=m.subscribe,g=m.publish,b=n(/*! ../../state */2),y=n(/*! ../../utils */3),_=n(/*! ../../styles */10),x=n(/*! ../../utils/i18n */4),C=!0,w=3,I=["768","640","512","480","360"],B={},M=[],E=0,L=window.devicePixelRatio||1,S="IBMChat-map",k={base:n(/*! ./templates/base.html */52),createDomArray:n(/*! ./templates/create-dom-array.html */53),addLocationsItem:n(/*! ./templates/add-locations-item.html */51),addLocationItem:n(/*! ./templates/add-location-item.html */50),hoursTodayClosed:n(/*! ./templates/hours-today-closed.html */55),hoursTodayUnknown:n(/*! ./templates/hours-today-unknown.html */56),hoursTimezone:n(/*! ./templates/hours-timezone.html */54)},A={locations:{none:function(){return x("loc_nearby_none")},single:function(){return x("loc_nearby_single")},list:function(){return x("loc_nearby_list")}}},T={init:function(){v("layout:show-locations",function(t){var e=new f(t);0===M.length&&v("resize",a),M.push(t.uuid),B[t.uuid]=e})}},D=["A","B","C","D","E","F","G"];f.prototype.init=function(t){switch(this.data=void 0!==t.message.data&&void 0!==t.message.data.location_data?t.message.data.location_data:[],this.data.length>1&&b.set({location_data:this.data}),this.eventListeners=[],this.parentElement=t.element,this.layoutElement=t.layoutElement,this.msgElement=t.msgElement,this.data.length){case 0:this.msgElement.textContent=A.locations.none();break;case 1:this.msgElement.textContent=A.locations.single();break;default:this.msgElement.textContent=A.locations.list()}if(this.data.length>0){var e=k.base;this.uuid=t.uuid,C&&(r(i()),C=!1),this.map=document.createElement("div"),this.map.innerHTML=y.compile(e,{ns:S}),this.mapElement=this.map.querySelector("."+S+"-img"),this.dataElement=this.map.querySelector("."+S+"-data"),this.data.length>1&&this.mapElement.appendChild(this.drawLocations()),this.dataElement.appendChild(this.addDetails()),this.layoutElement.appendChild(this.map),this.data.length>1&&this.layoutElement.querySelectorAll("."+S+"-locations-item")[0].focus()}this.subscribeReceive=v("receive",this.removeAllEventListeners,this)},f.prototype.reDrawMap=function(){this.mapElement.innerHTML="",this.data.length>1&&this.mapElement.appendChild(this.drawLocations())},f.prototype.addDetails=function(){return this.data.length>1?this.addLocations():this.addLocation()},f.prototype.convertColor=function(t){return _.normalizeToHex(t).replace("#","")},f.prototype.drawLocations=function(){var t=b.get(),e=document.createElement("img"),n=i(),r={size:n-8+"x120",scale:L};1===this.data.length&&(r.zoom=12),this.uri=t.mapsServer+"?",this.uri+=y.serialize(r),this.uri+="&locations=";for(var o="",a=0;a<w&&a<this.data.length;a++){var s=this.data[a];o+=0===a?s.address.lat+","+s.address.lng:"+"+s.address.lat+","+s.address.lng}return this.uri+=encodeURIComponent(o),this.uri+="&color="+encodeURIComponent(this.convertColor(t.styles.accentBackground)),e.setAttribute("src",this.uri),e},f.prototype.handleClick=function(){this.className=S+"-location-active",g("receive",{message:{text:[y.compile(A.locations.single(),{location:B[this.dataset.uuid].data[this.dataset.id-1].address.address}),x("anything_else")],layout:{name:"show-locations",index:0},data:{location_data:[B[this.dataset.uuid].data[this.dataset.id-1]]}}})},f.prototype.removeAllEventListeners=function(){var t=document.querySelector("."+this.uuid+" .IBMChat-watson-layout");if(t){t.classList.add("IBMChat-disabled-layout");for(var e=t.querySelectorAll("input, button"),n=0;n<e.length;n++)e[n].setAttribute("disabled",!0);for(var r=0;r<this.eventListeners.length;r++)this.eventListeners[r].removeEventListener("click",this.handleClick);this.hoursFunction&&this.hoursButton.removeEventListener("click",this.hoursFunction),this.locationsFunction&&this.locationsButton.removeEventListener("click",this.locationsFunction),this.eventListeners=[],this.subscribeReceive.remove()}},f.prototype.addLocation=function(){var t=document.createElement("div"),e=document.createElement("div"),n=b.get().location_data,r=this.data[0],i=function(t){return t.innerHTML=y.compile(k.addLocationItem,{ns:S,loc_all:x("loc_all")}),{link:t.querySelector("."+S+"-locations-item-data-address-link"),label:t.querySelector("."+S+"-locations-item-data-title"),address:t.querySelector("."+S+"-locations-item-data-address"),phone:t.querySelector("."+S+"-locations-item-data-phone"),email:t.querySelector("."+S+"-locations-item-data-email"),hours:t.querySelectorAll("."+S+"-locations-item-data-hours"),timezone:t.querySelectorAll("."+S+"-locations-item-data-timezone"),moreHours:t.querySelectorAll("."+S+"-locations-item-data-more-hours"),distance:t.querySelector("."+S+"-locations-item-distance"),backHolder:t.querySelector("."+S+"-locations-all-holder"),back:t.querySelector("."+S+"-locations-all"),parentEl:t.querySelector("."+S+"-locations-item")}},o=i(e);if(r.label?o.label.textContent=r.label:o.parentEl.removeChild(o.label),o.address.textContent=r.address.address,o.link.setAttribute("href",x("google_maps_url")+"?q="+encodeURIComponent(r.address.address)),o.link.setAttribute("target","_blank"),o.distance.textContent=p(r)||"",r.email?s(o.email,r):o.email.parentNode.removeChild(o.email),r.phones&&r.phones.length>0&&r.hasPhones!==!1?c(o.phone,r.phones):o.phone.parentNode.removeChild(o.phone),r.days&&r.hasDays!==!1)l(o.hours,o.moreHours,r.days,r.address.timezone,o.timezone);else{for(var a=0;a<o.hours;a++)o.hours[a].parentNode.removeChild(o.hours[a]);for(var u=0;u<o.timezone;u++)o.timezone[u].parentNode.removeChild(o.timezone[u]);for(var d=0;d<o.moreHours;a++)o.moreHours[d].parentNode.removeChild(o.moreHours[d])}return n&&n.length>1?(this.locationsButton=o.back,this.locationsFunction=function(t){t.preventDefault(),g("receive",{message:{text:[A.locations.list(),x("anything_else")],layout:{name:"show-locations",index:0},data:{location_data:n}}})},o.back.addEventListener("click",this.locationsFunction)):o.backHolder.parentNode.removeChild(o.backHolder),t.appendChild(e),t},f.prototype.addLocations=function(){for(var t=b.get(),e=function(e,n,r){e.addEventListener("click",this.handleClick),e.dataset.uuid=r,e.dataset.id=n+1,e.innerHTML=y.compile(k.addLocationsItem,{ns:S,title:o.label||"",address:o.address.address,iconText:D[n],accentText:t.styles.accentText,accentBackground:t.styles.accentBackground,distance:p(o)||""}),this.eventListeners.push(e)},n=document.createElement("div"),r=0;r<w&&r<this.data.length;r++){var i=document.createElement("div"),o=this.data[r];e.call(this,i,r,this.uuid),n.appendChild(i)}return n},t.exports=T},/*!*****************************!*\
  !*** ./src/utils/resize.js ***!
  \*****************************/
function(t,e){function n(t){var e=t.target||t.srcElement;e.__resizeRAF__&&o(e.__resizeRAF__),e.__resizeRAF__=i(function(){var n=e.__resizeTrigger__||{};n.__resizeListeners__&&n.__resizeListeners__.length>0&&n.__resizeListeners__.forEach(function(e){e&&"function"==typeof e&&e.call(n,t)})})}function r(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",n)}var i=function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)};return function(e){return t(e)}}(),o=function(){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(e){return t(e)}}(),a=function(t,e){if(t){if(!t.__resizeListeners__)if(t.__resizeListeners__=[],document.attachEvent)t.__resizeTrigger__=t,t.attachEvent("onresize",n);else{var i=t.__resizeTrigger__=document.createElement("object");"static"==getComputedStyle(t).position&&t.classList.add("IBMChat-relative"),i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),i.__resizeElement__=t,i.onload=r,i.type="text/html",t.appendChild(i)}t.__resizeListeners__.push(e)}},s=function(t,e){t&&(t.__resizeListeners__||t.__resizeTrigger__)&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(document.attachEvent?t.detachEvent("onresize",n):t.__resizeTrigger__.contentDocument&&(t.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",n),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__))))};t.exports={addResizeListener:a,removeResizeListener:s}},/*!***********************************!*\
  !*** ./src/utils/writeMessage.js ***!
  \***********************************/
function(t,e){function n(t,e){new r(t,e)}function r(t,e){this.init(t,e)}function i(t){return t.startsWith("http://")||t.startsWith("https://")?t:"http://"+t}function o(t){var e=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return e.test(t)}r.prototype.init=function(t,e){if(e){var n=this,r=[{type:"span",content:e}];this.addLineEndings(r).then(n.addUrls).then(n.addEmails).then(function(e){n.writeMessage(t,e)})["catch"](function(t){console.error(t)})}},r.prototype.writeMessage=function(t,e){e.map(function(e){var n=document.createElement(e.type);e.content&&(n.textContent=e.content),e.attributes&&Object.keys(e.attributes).map(function(t){n.setAttribute(t,e.attributes[t])}),t.appendChild(n)})},r.prototype.addLineEndings=function(t){return new window.Promise(function(e,n){try{for(var r=[],i=0;i<t.length;i++){var o=t[i].content.split("\n");o.map(function(t,e){t&&r.push({content:t,type:"span"}),o.length!=e+1&&r.push({type:"br"})})}e(r)}catch(a){n(a)}})},r.prototype.addUrls=function(t){return new window.Promise(function(e,n){try{for(var r=[],a=0;a<t.length;a++){t[a].content=t[a].content||"";var s=/(\b((https?:\/\/)|(www\.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,c="|^|%|^|",l=t[a].content.replace(s,c+"$1"+c),u=l.split(c);u.map(function(e){if(e.search(s)!=-1&&o(e)){var n=i(e);r.push({content:e,type:"a",attributes:{href:n,target:"_blank"}})}else r.push({content:e,type:t[a].type,attributes:t[a].attributes})})}e(r)}catch(d){n(d)}})},r.prototype.addEmails=function(t){return new window.Promise(function(e,n){try{for(var r=[],i=0;i<t.length;i++)if(t[i].content){var o=/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi,a=t[i].content.replace(o,"|||$1|||"),s=a.split("|||");s.map(function(e){var n=e.replace(o,'<a href="mailto:$1" target="_blank">$1</a>');n===e?r.push({content:e,type:t[i].type,attributes:t[i].attributes}):r.push({content:e,type:"a",attributes:{href:"mailto:"+e,target:"_blank"}})})}else r.push({type:t[i].type,content:t[i].content,attributes:t[i].attributes});e(r)}catch(c){n(c)}})},t.exports=n},/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
function(t,e){}])});
//# sourceMappingURL=chat.js.map